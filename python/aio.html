<!DOCTYPE html>
<!-- saved from url=(0071)https://swcarpentry.github.io/python-novice-inflammation/aio/index.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2020-07-21 14:56:32 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="http://pzindel.github.io/LanternPython">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.css">
    <link rel="stylesheet" type="text/css" href="../css/lesson.css">
    <link rel="stylesheet" type="text/css" href="../css/syntax.css">

    
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <title>
  Programming with Python
  </title>  

  </head>
  <body>

    







    <div class="container">
      
















  
  










<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="true">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      
      

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="navbar-collapse collapse in" id="bs-example-navbar-collapse-1" aria-expanded="true" style="">
      <ul class="nav navbar-nav">

        
        <li class="dropdown">
          <a href="../unix/01-intro.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">The Unix Shell <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="../unix/01-intro.html">Introducing the Shell</a></li>
            
            
            <li><a href="../unix/02-filedir.html">Navigating Files and Directories</a></li>
            
            
            <li><a href="../unix/03-create.html">Working With Files and Directories</a></li>
            
            
            <li><a href="../unix/04-pipefilter.html">Pipes and Filters</a></li>
            
            
            <li><a href="../unix/05-loop.html">Loops</a></li>
            
            
            <li><a href="../unix/06-script.html">Shell Scripts</a></li>
            
            
            <li><a href="../unix/07-find.html">Finding Things</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../unix/aio.html">All in one page</a></li>
          </ul>
        </li>
	        
		
		<li class="dropdown">
          <a href="./01-intro.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Programming with Python <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="./01-intro.html">Python Fundamentals</a></li>
            
            
            <li><a href="./02-numpy.html">Analyzing Patient Data</a></li>
            
            
            <li><a href="./03-matplotlib.html">Visualizing Tabular Data</a></li>
            
            
            <li><a href="./04-loop.html">Repeating Actions with Loops</a></li>
            
            
            <li><a href="./05-lists.html">Storing Multiple Values in Lists</a></li>
            
            
            <li><a href="./06-files.html">Analyzing Data from Multiple Files</a></li>
            
            
            <li><a href="./07-cond.html">Making Choices</a></li>
            
            
            <li><a href="./08-func.html">Creating Functions</a></li>
            
            
            <li><a href="./09-errors.html">Errors and Exceptions</a></li>
            
            
            <li><a href="./10-defensive.html">Defensive Programming</a></li>
            
            
            <li><a href="./11-debugging.html">Debugging</a></li>
            
            
            <li><a href="./12-cmdline.html">Command-Line Programs</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="./aio.html">All in one page</a></li>
          </ul>
        </li>
	

		<li class="dropdown">
          <a href="../data_analysis/01-intro-to-python.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Data Analysis <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="../data_analysis/00-before-we-start.html">Before we start</a></li>
            
            
            <li><a href="../data_analysis/01-intro-to-python.html">Short Introduction to Programming in Python</a></li>
            
            
            <li><a href="../data_analysis/02-starting-with-data.html">Starting With Data</a></li>
            
            
            <li><a href="../data_analysis/03-index-slice-subset.html">Indexing, Slicing and Subsetting DataFrames in Python</a></li>
            
            
            <li><a href="../data_analysis/04-data-types.html">Data Types and Formats</a></li>
            
            
            <li><a href="../data_analysis/05-merging-data.html">Combining DataFrames with Pandas</a></li>
            
            
            <li><a href="../data_analysis/06-loops-and-functions.html">Data Workflows and Automation</a></li>
            
            
            <li><a href="../data_analysis/07-visualization.html">Making Plots With plotnine</a></li>
            
            
            <li><a href="../data_analysis/08-all-together.html">Data Ingest and Visualization - Matplotlib and Pandas</a></li>
            
            
            <li><a href="../data_analysis/09-working-with-sql.html">Accessing SQLite Databases Using Python and Pandas</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../data_analysis/aio.html">All in one page</a></li>
          </ul>
        </li>

        <li><a href="../licenses.html">License</a></li>
	
	
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>
















<h1 class="maintitle"><a href="../index.html#python">Programming with Python</a></h1>



<article>

<h1 id="python-fundamentals" class="maintitle">Python Fundamentals</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 20 min
      <br>
      <strong>Exercises:</strong> 10 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>What basic data types can I work with in Python?</p>
</li>
	
	<li><p>How can I create a new variable in Python?</p>
</li>
	
	<li><p>Can I change the value associated with a variable after I create it?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Assign values to variables.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<h2 id="variables">Variables</h2>

<p>Any Python interpreter can be used as a calculator:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">3</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">4</span>
</code></pre></div></div>
<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>23
</code></pre></div></div>

<p>This is great but not very interesting.
To do anything useful with data, we need to assign its value to a <em>variable</em>.
In Python, we can <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#assign">assign</a> a value to a
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#variable">variable</a>, using the equals sign <code class="language-plaintext highlighter-rouge">=</code>.
For example, to assign value <code class="language-plaintext highlighter-rouge">60</code> to a variable <code class="language-plaintext highlighter-rouge">weight_kg</code>, we would execute:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span> <span class="o">=</span> <span class="mi">60</span>
</code></pre></div></div>

<p>From now on, whenever we use <code class="language-plaintext highlighter-rouge">weight_kg</code>, Python will substitute the value we assigned to
it. In layman’s terms, <strong>a variable is a name for a value</strong>.</p>

<p>In Python, variable names:</p>

<ul>
  <li>can include letters, digits, and underscores</li>
  <li>cannot start with a digit</li>
  <li>are <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#case-sensitive">case sensitive</a>.</li>
</ul>

<p>This means that, for example:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">weight0</code> is a valid variable name, whereas <code class="language-plaintext highlighter-rouge">0weight</code> is not</li>
  <li><code class="language-plaintext highlighter-rouge">weight</code> and <code class="language-plaintext highlighter-rouge">Weight</code> are different variables</li>
</ul>

<h2 id="types-of-data">Types of data</h2>
<p>Python knows various types of data. Three common ones are:</p>

<ul>
  <li>integer numbers</li>
  <li>floating point numbers, and</li>
  <li>strings.</li>
</ul>

<p>In the example above, variable <code class="language-plaintext highlighter-rouge">weight_kg</code> has an integer value of <code class="language-plaintext highlighter-rouge">60</code>.
To create a variable with a floating point value, we can execute:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span> <span class="o">=</span> <span class="mf">60.0</span>
</code></pre></div></div>

<p>And to create a string, we add single or double quotes around some text, for example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg_text</span> <span class="o">=</span> <span class="s">'weight in kilograms:'</span>
</code></pre></div></div>

<h2 id="using-variables-in-python">Using Variables in Python</h2>
<p>To display the value of a variable to the screen in Python, we can use the <code class="language-plaintext highlighter-rouge">print</code> function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">weight_kg</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>60.0
</code></pre></div></div>

<p>We can display multiple things at once using only one <code class="language-plaintext highlighter-rouge">print</code> command:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">weight_kg_text</span><span class="p">,</span> <span class="n">weight_kg</span><span class="p">)</span>
</code></pre></div></div>
<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>weight in kilograms: 60.0
</code></pre></div></div>

<p>Moreover, we can do arithmetic with variables right inside the <code class="language-plaintext highlighter-rouge">print</code> function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'weight in pounds:'</span><span class="p">,</span> <span class="mf">2.2</span> <span class="o">*</span> <span class="n">weight_kg</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>weight in pounds: 132.0
</code></pre></div></div>

<p>The above command, however, did not change the value of <code class="language-plaintext highlighter-rouge">weight_kg</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">weight_kg</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>60.0
</code></pre></div></div>

<p>To change the value of the <code class="language-plaintext highlighter-rouge">weight_kg</code> variable, we have to
<strong>assign</strong> <code class="language-plaintext highlighter-rouge">weight_kg</code> a new value using the equals <code class="language-plaintext highlighter-rouge">=</code> sign:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span> <span class="o">=</span> <span class="mf">65.0</span>
<span class="k">print</span><span class="p">(</span><span class="s">'weight in kilograms is now:'</span><span class="p">,</span> <span class="n">weight_kg</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>weight in kilograms is now: 65.0
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="variables-as-sticky-notes">Variables as Sticky Notes</h2>

  <p>A variable is analogous to a sticky note with a name written on it:
assigning a value to a variable is like putting that sticky note on a particular value.</p>

  <p><img src="./aio_files/python-sticky-note-variables-01.svg" alt="Value of 65.0 with weight_kg label stuck on it"></p>

  <p>This means that assigning a value to one variable does <strong>not</strong> change
values of other variables.
For example, let’s store the subject’s weight in pounds in its own variable:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># There are 2.2 pounds per kilogram
</span><span class="n">weight_lb</span> <span class="o">=</span> <span class="mf">2.2</span> <span class="o">*</span> <span class="n">weight_kg</span>
<span class="k">print</span><span class="p">(</span><span class="n">weight_kg_text</span><span class="p">,</span> <span class="n">weight_kg</span><span class="p">,</span> <span class="s">'and in pounds:'</span><span class="p">,</span> <span class="n">weight_lb</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>weight in kilograms: 65.0 and in pounds: 143.0
</code></pre></div>  </div>

  <p><img src="./aio_files/python-sticky-note-variables-02.svg" alt="Value of 65.0 with weight_kg label stuck on it, and value of 143.0 with weight_lb label stuck on it"></p>

  <p>Let’s now change <code class="language-plaintext highlighter-rouge">weight_kg</code>:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span> <span class="o">=</span> <span class="mf">100.0</span>
<span class="k">print</span><span class="p">(</span><span class="s">'weight in kilograms is now:'</span><span class="p">,</span> <span class="n">weight_kg</span><span class="p">,</span> <span class="s">'and weight in pounds is still:'</span><span class="p">,</span> <span class="n">weight_lb</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>weight in kilograms is now: 100.0 and weight in pounds is still: 143.0
</code></pre></div>  </div>

  <p><img src="./aio_files/python-sticky-note-variables-03.svg" alt="Value of 100.0 with label weight_kg stuck on it, and value of 143.0 with label weight_lb stuck on it"></p>

  <p>Since <code class="language-plaintext highlighter-rouge">weight_lb</code> doesn’t “remember” where its value comes from,
it is not updated when we change <code class="language-plaintext highlighter-rouge">weight_kg</code>.</p>
</blockquote>

<blockquote class="challenge">
  <h2 id="check-your-understanding">Check Your Understanding</h2>

  <p>What values do the variables <code class="language-plaintext highlighter-rouge">mass</code> and <code class="language-plaintext highlighter-rouge">age</code> have after each statement in the following program?
Test your answers by executing the commands.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mass</span> <span class="o">=</span> <span class="mf">47.5</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">122</span>
<span class="n">mass</span> <span class="o">=</span> <span class="n">mass</span> <span class="o">*</span> <span class="mf">2.0</span>
<span class="n">age</span> <span class="o">=</span> <span class="n">age</span> <span class="o">-</span> <span class="mi">20</span>
<span class="k">print</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>95.0 102
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="sorting-out-references">Sorting Out References</h2>

  <p>What does the following program print out?</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">first</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="s">'Grace'</span><span class="p">,</span> <span class="s">'Hopper'</span>
<span class="n">third</span><span class="p">,</span> <span class="n">fourth</span> <span class="o">=</span> <span class="n">second</span><span class="p">,</span> <span class="n">first</span>
<span class="k">print</span><span class="p">(</span><span class="n">third</span><span class="p">,</span> <span class="n">fourth</span><span class="p">)</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>Hopper Grace
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Basic data types in Python include integers, strings, and floating-point numbers.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">variable = value</code> to assign a value to a variable in order to record it in memory.</p>
</li>
    
    <li><p>Variables are created on demand whenever a value is assigned to them.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">print(something)</code> to display the value of <code class="language-plaintext highlighter-rouge">something</code>.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="analyzing-patient-data" class="maintitle">Analyzing Patient Data</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 40 min
      <br>
      <strong>Exercises:</strong> 20 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I process tabular data files in Python?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Explain what a library is and what libraries are used for.</p>
</li>
	
	<li><p>Import a Python library and use the functions it contains.</p>
</li>
	
	<li><p>Read tabular data from a file into a program.</p>
</li>
	
	<li><p>Select individual values and subsections from data.</p>
</li>
	
	<li><p>Perform operations on arrays of data.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>Words are useful, but what’s more useful are the sentences and stories we build with them.
Similarly, while a lot of powerful, general tools are built into Python,
specialized tools built up from these basic units live in
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#library">libraries</a>
that can be called upon when needed.</p>

<h2 id="loading-data-into-python">Loading data into Python</h2>

<p>To begin processing inflammation data, we need to load it into Python.
We can do that using a library called
<a href="http://docs.scipy.org/doc/numpy/" title="NumPy Documentation">NumPy</a>, which stands for Numerical Python.
In general, you should use this library when you want to do fancy things with lots of numbers,
especially if you have matrices or arrays. To tell Python that we’d like to start using NumPy,
we need to <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#import">import</a> it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span>
</code></pre></div></div>

<p>Importing a library is like getting a piece of lab equipment out of a storage locker and setting it
up on the bench. Libraries provide additional functionality to the basic Python package, much like
a new piece of equipment adds functionality to a lab space. Just like in the lab, importing too
many libraries can sometimes complicate and slow down your programs - so we only import what we
need for each program.</p>

<p>Once we’ve imported the library, we can ask the library to read our data file for us:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 0.,  0.,  1., ...,  3.,  0.,  0.],
       [ 0.,  1.,  2., ...,  1.,  0.,  1.],
       [ 0.,  1.,  1., ...,  2.,  1.,  1.],
       ...,
       [ 0.,  1.,  1., ...,  1.,  1.,  1.],
       [ 0.,  0.,  0., ...,  0.,  2.,  0.],
       [ 0.,  0.,  1., ...,  1.,  1.,  0.]])
</code></pre></div></div>

<p>The expression <code class="language-plaintext highlighter-rouge">numpy.loadtxt(...)</code> is a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#function-call">function call</a>
that asks Python to run the <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#function">function</a> <code class="language-plaintext highlighter-rouge">loadtxt</code> which
belongs to the <code class="language-plaintext highlighter-rouge">numpy</code> library. This <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#dotted-notation">dotted notation</a>
is used everywhere in Python: the thing that appears before the dot contains the thing that
appears after.</p>

<p>As an example, John Smith is the John that belongs to the Smith family.
We could use the dot notation to write his name <code class="language-plaintext highlighter-rouge">smith.john</code>,
just as <code class="language-plaintext highlighter-rouge">loadtxt</code> is a function that belongs to the <code class="language-plaintext highlighter-rouge">numpy</code> library.</p>

<p><code class="language-plaintext highlighter-rouge">numpy.loadtxt</code> has two <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#parameter">parameters</a>: the name of the file
we want to read and the <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#delimiter">delimiter</a> that separates values on
a line. These both need to be character strings (or <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#string">strings</a>
for short), so we put them in quotes.</p>

<p>Since we haven’t told it to do anything else with the function’s output,
the <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#notebook">notebook</a> displays it.
In this case,
that output is the data we just loaded.
By default,
only a few rows and columns are shown
(with <code class="language-plaintext highlighter-rouge">...</code> to omit elements when displaying big arrays).
Note that, to save space when displaying NumPy arrays, Python does not show us trailing zeros, so <code class="language-plaintext highlighter-rouge">1.0</code> becomes <code class="language-plaintext highlighter-rouge">1.</code>.</p>

<blockquote class="callout">
  <h2 id="importing-libraries-with-shortcuts">Importing libraries with shortcuts</h2>

  <p>In this lesson we use the <code class="language-plaintext highlighter-rouge">import numpy</code> <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#syntax">syntax</a> to import NumPy.
However, shortcuts such as <code class="language-plaintext highlighter-rouge">import numpy as np</code> are frequently used.  Importing NumPy this way means that after the
inital import, rather than writing <code class="language-plaintext highlighter-rouge">numpy.loadtxt(...)</code>, you can now write <code class="language-plaintext highlighter-rouge">np.loadtxt(...)</code>. Some
people prefer this as it is quicker to type and results in shorter lines of code - especially for libraries
with long names! You will frequently see Python code online using a NumPy function with <code class="language-plaintext highlighter-rouge">np</code>, and it’s
because they’ve used this shortcut. It makes no difference which approach you choose to take, but you must be
consistent as if you use <code class="language-plaintext highlighter-rouge">import numpy as np</code> then <code class="language-plaintext highlighter-rouge">numpy.loadtxt(...)</code> will not work, and you must use <code class="language-plaintext highlighter-rouge">np.loadtxt(...)</code>
instead. Because of this, when working with other people it is important you agree on how libraries are imported.</p>
</blockquote>

<p>Our call to <code class="language-plaintext highlighter-rouge">numpy.loadtxt</code> read our file
but didn’t save the data in memory.
To do that,
we need to assign the array to a variable. In a similar manner to how we assign a single
value to a variable, we can also assign an array of values to a variable using the same syntax.
Let’s re-run <code class="language-plaintext highlighter-rouge">numpy.loadtxt</code> and save the returned data:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
</code></pre></div></div>

<p>This statement doesn’t produce any output because we’ve assigned the output to the variable <code class="language-plaintext highlighter-rouge">data</code>.
If we want to check that the data have been loaded,
we can print the variable’s value:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[ 0.  0.  1. ...,  3.  0.  0.]
 [ 0.  1.  2. ...,  1.  0.  1.]
 [ 0.  1.  1. ...,  2.  1.  1.]
 ...,
 [ 0.  1.  1. ...,  1.  1.  1.]
 [ 0.  0.  0. ...,  0.  2.  0.]
 [ 0.  0.  1. ...,  1.  1.  0.]]
</code></pre></div></div>

<p>Now that the data are in memory,
we can manipulate them.
First,
let’s ask what <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#type">type</a> of thing <code class="language-plaintext highlighter-rouge">data</code> refers to:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'numpy.ndarray'&gt;
</code></pre></div></div>

<p>The output tells us that <code class="language-plaintext highlighter-rouge">data</code> currently refers to
an N-dimensional array, the functionality for which is provided by the NumPy library.
These data correspond to arthritis patients’ inflammation.
The rows are the individual patients, and the columns
are their daily inflammation measurements.</p>

<blockquote class="callout">
  <h2 id="data-type">Data Type</h2>

  <p>A Numpy array contains one or more elements
of the same type. The <code class="language-plaintext highlighter-rouge">type</code> function will only tell you that
a variable is a NumPy array but won’t tell you the type of
thing inside the array.
We can find out the type
of the data contained in the NumPy array.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">dtype</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>float64
</code></pre></div>  </div>

  <p>This tells us that the NumPy array’s elements are
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#floating-point%20number">floating-point numbers</a>.</p>
</blockquote>

<p>With the following command, we can see the array’s <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#shape">shape</a>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(60, 40)
</code></pre></div></div>

<p>The output tells us that the <code class="language-plaintext highlighter-rouge">data</code> array variable contains 60 rows and 40 columns. When we
created the variable <code class="language-plaintext highlighter-rouge">data</code> to store our arthritis data, we did not only create the array; we also
created information about the array, called <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#member">members</a> or
attributes. This extra information describes <code class="language-plaintext highlighter-rouge">data</code> in the same way an adjective describes a noun.
<code class="language-plaintext highlighter-rouge">data.shape</code> is an attribute of <code class="language-plaintext highlighter-rouge">data</code> which describes the dimensions of <code class="language-plaintext highlighter-rouge">data</code>. We use the same
dotted notation for the attributes of variables that we use for the functions in libraries because
they have the same part-and-whole relationship.</p>

<p>If we want to get a single number from the array, we must provide an
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#index">index</a> in square brackets after the variable name, just as we
do in math when referring to an element of a matrix.  Our inflammation data has two dimensions, so
we will need to use two indices to refer to one specific value:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'first value in data:'</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>first value in data: 0.0
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'middle value in data:'</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>middle value in data: 13.0
</code></pre></div></div>

<p>The expression <code class="language-plaintext highlighter-rouge">data[30, 20]</code> accesses the element at row 30, column 20. While this expression may
not surprise you,
 <code class="language-plaintext highlighter-rouge">data[0, 0]</code> might.
Programming languages like Fortran, MATLAB and R start counting at 1
because that’s what human beings have done for thousands of years.
Languages in the C family (including C++, Java, Perl, and Python) count from 0
because it represents an offset from the first value in the array (the second
value is offset by one index from the first value). This is closer to the way
that computers represent arrays (if you are interested in the historical
reasons behind counting indices from zero, you can read
<a href="http://exple.tive.org/blarg/2013/10/22/citation-needed/">Mike Hoye’s blog post</a>).
As a result,
if we have an M×N array in Python,
its indices go from 0 to M-1 on the first axis
and 0 to N-1 on the second.
It takes a bit of getting used to,
but one way to remember the rule is that
the index is how many steps we have to take from the start to get the item we want.</p>

<p><img src="./aio_files/python-zero-index.png" alt="Zero Index"></p>

<blockquote class="callout">
  <h2 id="in-the-corner">In the Corner</h2>

  <p>What may also surprise you is that when Python displays an array,
it shows the element with index <code class="language-plaintext highlighter-rouge">[0, 0]</code> in the upper left corner
rather than the lower left.
This is consistent with the way mathematicians draw matrices
but different from the Cartesian coordinates.
The indices are (row, column) instead of (column, row) for the same reason,
which can be confusing when plotting data.</p>
</blockquote>

<h2 id="slicing-data">Slicing data</h2>
<p>An index like <code class="language-plaintext highlighter-rouge">[30, 20]</code> selects a single element of an array,
but we can select whole sections as well.
For example,
we can select the first ten days (columns) of values
for the first four patients (rows) like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[ 0.  0.  1.  3.  1.  2.  4.  7.  8.  3.]
 [ 0.  1.  2.  1.  2.  1.  3.  2.  2.  6.]
 [ 0.  1.  1.  3.  3.  2.  6.  2.  5.  9.]
 [ 0.  0.  2.  0.  4.  2.  2.  1.  6.  7.]]
</code></pre></div></div>

<p>The <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#slice">slice</a> <code class="language-plaintext highlighter-rouge">0:4</code> means, “Start at index 0 and go up to, but not
including, index 4”. Again, the up-to-but-not-including takes a bit of getting used to, but the
rule is that the difference between the upper and lower bounds is the number of values in the slice.</p>

<p>We don’t have to start slices at 0:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[ 0.  0.  1.  2.  2.  4.  2.  1.  6.  4.]
 [ 0.  0.  2.  2.  4.  2.  2.  5.  5.  8.]
 [ 0.  0.  1.  2.  3.  1.  2.  3.  5.  3.]
 [ 0.  0.  0.  3.  1.  5.  6.  5.  5.  8.]
 [ 0.  1.  1.  2.  1.  3.  5.  3.  5.  8.]]
</code></pre></div></div>

<p>We also don’t have to include the upper and lower bound on the slice.  If we don’t include the lower
bound, Python uses 0 by default; if we don’t include the upper, the slice runs to the end of the
axis, and if we don’t include either (i.e., if we use ‘:’ on its own), the slice includes
everything:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">small</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">36</span><span class="p">:]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'small is:'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">small</span><span class="p">)</span>
</code></pre></div></div>
<p>The above example selects rows 0 through 2 and columns 36 through to the end of the array.</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>small is:
[[ 2.  3.  0.  0.]
 [ 1.  1.  0.  1.]
 [ 2.  2.  1.  1.]]
</code></pre></div></div>

<h2 id="analyzing-data">Analyzing data</h2>

<p>NumPy has several useful functions that take an array as input to perform operations on its values.
If we want to find the average inflammation for all patients on
all days, for example, we can ask NumPy to compute <code class="language-plaintext highlighter-rouge">data</code>’s mean value:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>6.14875
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">mean</code> is a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#function">function</a> that takes
an array as an <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#argument">argument</a>.</p>

<blockquote class="callout">
  <h2 id="not-all-functions-have-input">Not All Functions Have Input</h2>

  <p>Generally, a function uses inputs to produce outputs.
However, some functions produce outputs without
needing any input. For example, checking the current time
doesn’t require any input.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="k">print</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">ctime</span><span class="p">())</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sat Mar 26 13:07:33 2016
</code></pre></div>  </div>

  <p>For functions that don’t take in any arguments,
we still need parentheses (<code class="language-plaintext highlighter-rouge">()</code>)
to tell Python to go and do something for us.</p>
</blockquote>

<p>Let’s use three other NumPy functions to get some descriptive values about the dataset.
We’ll also use multiple assignment,
a convenient Python feature that will enable us to do this all in one line.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">maxval</span><span class="p">,</span> <span class="n">minval</span><span class="p">,</span> <span class="n">stdval</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">numpy</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'maximum inflammation:'</span><span class="p">,</span> <span class="n">maxval</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'minimum inflammation:'</span><span class="p">,</span> <span class="n">minval</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'standard deviation:'</span><span class="p">,</span> <span class="n">stdval</span><span class="p">)</span>
</code></pre></div></div>

<p>Here we’ve assigned the return value from <code class="language-plaintext highlighter-rouge">numpy.max(data)</code> to the variable <code class="language-plaintext highlighter-rouge">maxval</code>, the value
from <code class="language-plaintext highlighter-rouge">numpy.min(data)</code> to <code class="language-plaintext highlighter-rouge">minval</code>, and so on.</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maximum inflammation: 20.0
minimum inflammation: 0.0
standard deviation: 4.61383319712
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="mystery-functions-in-ipython">Mystery Functions in IPython</h2>

  <p>How did we know what functions NumPy has and how to use them?
If you are working in IPython or in a Jupyter Notebook, there is an easy way to find out.
If you type the name of something followed by a dot, then you can use tab completion
(e.g. type <code class="language-plaintext highlighter-rouge">numpy.</code> and then press <kbd>Tab</kbd>)
to see a list of all functions and attributes that you can use. After selecting one, you
can also add a question mark (e.g. <code class="language-plaintext highlighter-rouge">numpy.cumprod?</code>), and IPython will return an
explanation of the method! This is the same as doing <code class="language-plaintext highlighter-rouge">help(numpy.cumprod)</code>.
Similarly, if you are using the “plain vanilla” Python interpreter, you can type <code class="language-plaintext highlighter-rouge">numpy.</code>
and press the <kbd>Tab</kbd> key twice for a listing of what is available. You can then use the
<code class="language-plaintext highlighter-rouge">help()</code> function to see an explanation of the function you’re interested in,
for example: <code class="language-plaintext highlighter-rouge">help(numpy.cumprod)</code>.</p>
</blockquote>

<p>When analyzing data, though,
we often want to look at variations in statistical values,
such as the maximum inflammation per patient
or the average inflammation per day.
One way to do this is to create a new temporary array of the data we want,
then ask it to do the calculation:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">patient_0</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="c1"># 0 on the first axis (rows), everything on the second (columns)
</span><span class="k">print</span><span class="p">(</span><span class="s">'maximum inflammation for patient 0:'</span><span class="p">,</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">patient_0</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maximum inflammation for patient 0: 18.0
</code></pre></div></div>

<p>Everything in a line of code following the ‘#’ symbol is a
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#comment">comment</a> that is ignored by Python.
Comments allow programmers to leave explanatory notes for other
programmers or their future selves.</p>

<p>We don’t actually need to store the row in a variable of its own.
Instead, we can combine the selection and the function call:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'maximum inflammation for patient 2:'</span><span class="p">,</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:]))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maximum inflammation for patient 2: 19.0
</code></pre></div></div>

<p>What if we need the maximum inflammation for each patient over all days (as in the
next diagram on the left) or the average for each day (as in the
diagram on the right)? As the diagram below shows, we want to perform the
operation across an axis:</p>

<p><img src="./aio_files/python-operations-across-axes.png" alt="Per-patient maximum inflammation is computed row-wise across all columns using numpy.max(data, axis=1).
Per-day average inflammation is computed column-wise across all rows using numpy.mean(data, axis=0)."></p>

<p>To support this functionality,
most array functions allow us to specify the axis we want to work on.
If we ask for the average across axis 0 (rows in our 2D example),
we get:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[  0.           0.45         1.11666667   1.75         2.43333333   3.15
   3.8          3.88333333   5.23333333   5.51666667   5.95         5.9
   8.35         7.73333333   8.36666667   9.5          9.58333333
  10.63333333  11.56666667  12.35        13.25        11.96666667
  11.03333333  10.16666667  10.           8.66666667   9.15         7.25
   7.33333333   6.58333333   6.06666667   5.95         5.11666667   3.6
   3.3          3.56666667   2.48333333   1.5          1.13333333
   0.56666667]
</code></pre></div></div>

<p>As a quick check,
we can ask this array what its shape is:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">).</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(40,)
</code></pre></div></div>

<p>The expression <code class="language-plaintext highlighter-rouge">(40,)</code> tells us we have an N×1 vector,
so this is the average inflammation per day for all patients.
If we average across axis 1 (columns in our 2D example), we get:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ 5.45   5.425  6.1    5.9    5.55   6.225  5.975  6.65   6.625  6.525
  6.775  5.8    6.225  5.75   5.225  6.3    6.55   5.7    5.85   6.55
  5.775  5.825  6.175  6.1    5.8    6.425  6.05   6.025  6.175  6.55
  6.175  6.35   6.725  6.125  7.075  5.725  5.925  6.15   6.075  5.75
  5.975  5.725  6.3    5.9    6.75   5.925  7.225  6.15   5.95   6.275  5.7
  6.1    6.825  5.975  6.725  5.7    6.25   6.4    7.05   5.9  ]
</code></pre></div></div>

<p>which is the average inflammation per patient across all days.</p>

<blockquote class="challenge">
  <h2 id="slicing-strings">Slicing Strings</h2>

  <p>A section of an array is called a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#slice">slice</a>.
We can take slices of character strings as well:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">element</span> <span class="o">=</span> <span class="s">'oxygen'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'first three characters:'</span><span class="p">,</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last three characters:'</span><span class="p">,</span> <span class="n">element</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>first three characters: oxy
last three characters: gen
</code></pre></div>  </div>

  <p>What is the value of <code class="language-plaintext highlighter-rouge">element[:4]</code>?
What about <code class="language-plaintext highlighter-rouge">element[4:]</code>?
Or <code class="language-plaintext highlighter-rouge">element[:]</code>?</p>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>oxyg
en
oxygen
</code></pre></div>    </div>
  </blockquote>

  <p>What is <code class="language-plaintext highlighter-rouge">element[-1]</code>?
What is <code class="language-plaintext highlighter-rouge">element[-2]</code>?</p>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>n
e
</code></pre></div>    </div>
  </blockquote>

  <p>Given those answers,
explain what <code class="language-plaintext highlighter-rouge">element[1:-1]</code> does.</p>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Creates a substring from index 1 up to (not including) the final index,
effectively removing the first and last letters from ‘oxygen’</p>
  </blockquote>

  <p>How can we rewrite the slice for getting the last three characters of <code class="language-plaintext highlighter-rouge">element</code>,
so that it works even if we assign a different string to <code class="language-plaintext highlighter-rouge">element</code>?
Test your solution with the following strings: <code class="language-plaintext highlighter-rouge">carpentry</code>, <code class="language-plaintext highlighter-rouge">clone</code>, <code class="language-plaintext highlighter-rouge">hi</code>.</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">element</span> <span class="o">=</span> <span class="s">'oxygen'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last three characters:'</span><span class="p">,</span> <span class="n">element</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
<span class="n">element</span> <span class="o">=</span> <span class="s">'carpentry'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last three characters:'</span><span class="p">,</span> <span class="n">element</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
<span class="n">element</span> <span class="o">=</span> <span class="s">'clone'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last three characters:'</span><span class="p">,</span> <span class="n">element</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
<span class="n">element</span> <span class="o">=</span> <span class="s">'hi'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last three characters:'</span><span class="p">,</span> <span class="n">element</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</code></pre></div>    </div>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>last three characters: gen
last three characters: try
last three characters: one
last three characters: hi
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="thin-slices">Thin Slices</h2>

  <p>The expression <code class="language-plaintext highlighter-rouge">element[3:3]</code> produces an <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#empty-string">empty string</a>,
i.e., a string that contains no characters.
If <code class="language-plaintext highlighter-rouge">data</code> holds our array of patient data,
what does <code class="language-plaintext highlighter-rouge">data[3:3, 4:4]</code> produce?
What about <code class="language-plaintext highlighter-rouge">data[3:3, :]</code>?</p>

  <blockquote class="solution">
    <h2 id="solution-4">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>array([], shape=(0, 0), dtype=float64)
array([], shape=(0, 40), dtype=float64)
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="stacking-arrays">Stacking Arrays</h2>

  <p>Arrays can be concatenated and stacked on top of one another,
using NumPy’s <code class="language-plaintext highlighter-rouge">vstack</code> and <code class="language-plaintext highlighter-rouge">hstack</code> functions for vertical and horizontal stacking, respectively.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'A = '</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'B = '</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="n">C</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'C = '</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>A =
[[1 2 3]
 [4 5 6]
 [7 8 9]]
B =
[[1 2 3 1 2 3]
 [4 5 6 4 5 6]
 [7 8 9 7 8 9]]
C =
[[1 2 3]
 [4 5 6]
 [7 8 9]
 [1 2 3]
 [4 5 6]
 [7 8 9]]
</code></pre></div>  </div>

  <p>Write some additional code that slices the first and last columns of <code class="language-plaintext highlighter-rouge">A</code>,
and stacks them into a 3x2 array.
Make sure to <code class="language-plaintext highlighter-rouge">print</code> the results to verify your solution.</p>

  <blockquote class="solution">
    <h2 id="solution-5">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>

    <p style="display: none;">A ‘gotcha’ with array indexing is that singleton dimensions
are dropped by default. That means <code class="language-plaintext highlighter-rouge">A[:, 0]</code> is a one dimensional
array, which won’t stack as desired. To preserve singleton dimensions,
the index itself can be a slice or array. For example, <code class="language-plaintext highlighter-rouge">A[:, :1]</code> returns
a two dimensional array with one singleton dimension (i.e. a column
vector).</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">D</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">A</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">A</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'D = '</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>D =
[[1 3]
 [4 6]
 [7 9]]
</code></pre></div>    </div>
  </blockquote>

  <blockquote class="solution">
    <h2 id="solution-6">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>

    <p style="display: none;">An alternative way to achieve the same result is to use Numpy’s
delete function to remove the second column of A.</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">D</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'D = '</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>D =
[[1 3]
 [4 6]
 [7 9]]
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="change-in-inflammation">Change In Inflammation</h2>

  <p>The patient data is <em>longitudinal</em> in the sense that each row represents a
series of observations relating to one individual.  This means that
the change in inflammation over time is a meaningful concept.
Let’s find out how to calculate changes in the data contained in an array
with NumPy.</p>

  <p>The <code class="language-plaintext highlighter-rouge">numpy.diff()</code> function takes an array and returns the differences
between two successive values. Let’s use it to examine the changes
each day across the first week of patient 3 from our inflammation dataset.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">patient3_week1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">patient3_week1</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [0. 0. 2. 0. 4. 2. 2.]
</code></pre></div>  </div>

  <p>Calling <code class="language-plaintext highlighter-rouge">numpy.diff(patient3_week1)</code> would do the following calculations</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span> <span class="mi">0</span> <span class="o">-</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">]</span>
</code></pre></div>  </div>

  <p>and return the 6 difference values in a new array.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="n">diff</span><span class="p">(</span><span class="n">patient3_week1</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ 0.,  2., -2.,  4., -2.,  0.])
</code></pre></div>  </div>

  <p>Note that the array of differences is shorter by one element (length 6).</p>

  <p>When calling <code class="language-plaintext highlighter-rouge">numpy.diff</code> with a multi-dimensional array, an <code class="language-plaintext highlighter-rouge">axis</code> argument may
be passed to the function to specify which axis to process. When applying 
<code class="language-plaintext highlighter-rouge">numpy.diff</code> to our 2D inflammation array <code class="language-plaintext highlighter-rouge">data</code>, which axis would we specify?</p>

  <blockquote class="solution">
    <h2 id="solution-7">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Since the row axis (0) is patients, it does not make sense to get the
difference between two arbitrary patients. The column axis (1) is in
days, so the difference is the change in inflammation – a meaningful
concept.</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="n">diff</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>

  <p>If the shape of an individual data file is <code class="language-plaintext highlighter-rouge">(60, 40)</code> (60 rows and 40
columns), what would the shape of the array be after you run the <code class="language-plaintext highlighter-rouge">diff()</code>
function and why?</p>

  <blockquote class="solution">
    <h2 id="solution-8">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">The shape will be <code class="language-plaintext highlighter-rouge">(60, 39)</code> because there is one fewer difference between
columns than there are columns in the data.</p>
  </blockquote>

  <p>How would you find the largest change in inflammation for each patient? Does
it matter if the change in inflammation is an increase or a decrease?</p>

  <blockquote class="solution">
    <h2 id="solution-9">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">By using the <code class="language-plaintext highlighter-rouge">numpy.max()</code> function after you apply the <code class="language-plaintext highlighter-rouge">numpy.diff()</code>
function, you will get the largest difference between days.</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">diff</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>    </div>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">array</span><span class="p">([</span>  <span class="mf">7.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>
         <span class="mf">7.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>
        <span class="mf">12.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>
        <span class="mf">11.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>
        <span class="mf">12.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>
         <span class="mf">8.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">7.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">])</span>
</code></pre></div>    </div>

    <p style="display: none;">If inflammation values <em>decrease</em> along an axis, then the difference from
one element to the next will be negative. If
you are interested in the <strong>magnitude</strong> of the change and not the
direction, the <code class="language-plaintext highlighter-rouge">numpy.absolute()</code> function will provide that.</p>

    <p style="display: none;">Notice the difference if you get the largest <em>absolute</em> difference
between readings.</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">diff</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>    </div>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">array</span><span class="p">([</span> <span class="mf">12.</span><span class="p">,</span>  <span class="mf">14.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>
        <span class="mf">12.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>
        <span class="mf">12.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>   <span class="mf">8.</span><span class="p">,</span>
        <span class="mf">11.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">11.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>
        <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>   <span class="mf">9.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>
        <span class="mf">11.</span><span class="p">,</span>  <span class="mf">13.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">10.</span><span class="p">,</span>  <span class="mf">12.</span><span class="p">])</span>
</code></pre></div>    </div>

  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Import a library into a program using <code class="language-plaintext highlighter-rouge">import libraryname</code>.</p>
</li>
    
    <li><p>Use the <code class="language-plaintext highlighter-rouge">numpy</code> library to work with arrays in Python.</p>
</li>
    
    <li><p>The expression <code class="language-plaintext highlighter-rouge">array.shape</code> gives the shape of an array.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">array[x, y]</code> to select a single element from a 2D array.</p>
</li>
    
    <li><p>Array indices start at 0, not 1.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">low:high</code> to specify a <code class="language-plaintext highlighter-rouge">slice</code> that includes the indices from <code class="language-plaintext highlighter-rouge">low</code> to <code class="language-plaintext highlighter-rouge">high-1</code>.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge"># some kind of explanation</code> to add comments to programs.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">numpy.mean(array)</code>, <code class="language-plaintext highlighter-rouge">numpy.max(array)</code>, and <code class="language-plaintext highlighter-rouge">numpy.min(array)</code> to calculate simple statistics.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">numpy.mean(array, axis=0)</code> or <code class="language-plaintext highlighter-rouge">numpy.mean(array, axis=1)</code> to calculate statistics across the specified axis.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="visualizing-tabular-data" class="maintitle">Visualizing Tabular Data</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 20 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I visualize tabular data in Python?</p>
</li>
	
	<li><p>How can I group several plots together?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Plot simple graphs from data.</p>
</li>
	
	<li><p>Group several graphs in a single figure.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<h2 id="visualizing-data">Visualizing data</h2>
<p>The mathematician Richard Hamming once said, “The purpose of computing is insight, not numbers,” and
the best way to develop insight is often to visualize data.  Visualization deserves an entire
lecture of its own, but we can explore a few features of Python’s <code class="language-plaintext highlighter-rouge">matplotlib</code> library here.  While
there is no official plotting library, <code class="language-plaintext highlighter-rouge">matplotlib</code> is the <em>de facto</em> standard.  First, we will
import the <code class="language-plaintext highlighter-rouge">pyplot</code> module from <code class="language-plaintext highlighter-rouge">matplotlib</code> and use two of its functions to create and display a
heat map of our data:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="./aio_files/inflammation-01-imshow.svg" alt="Heatmap of the Data"></p>

<p>Blue pixels in this heat map represent low values, while yellow pixels represent high values.  As we
can see, inflammation rises and falls over a 40-day period.  Let’s take a look at the average inflammation over time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ave_inflammation</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ave_plot</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ave_inflammation</span><span class="p">)</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="./aio_files/inflammation-01-average.svg" alt="Average Inflammation Over Time"></p>

<p>Here, we have put the average inflammation per day across all patients in the variable <code class="language-plaintext highlighter-rouge">ave_inflammation</code>, then
asked <code class="language-plaintext highlighter-rouge">matplotlib.pyplot</code> to create and display a line graph of those values.  The result is a
roughly linear rise and fall, which is suspicious: we might instead expect a sharper rise and slower
fall.  Let’s have a look at two other statistics:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">max_plot</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="./aio_files/inflammation-01-maximum.svg" alt="Maximum Value Along The First Axis"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">min_plot</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="./aio_files/inflammation-01-minimum.svg" alt="Minimum Value Along The First Axis"></p>

<p>The maximum value rises and falls smoothly, while the minimum seems to be a step function.  Neither
trend seems particularly likely, so either there’s a mistake in our calculations or something is
wrong with our data.  This insight would have been difficult to reach by examining the numbers
themselves without visualization tools.</p>

<h3 id="grouping-plots">Grouping plots</h3>
<p>You can group similar plots in a single figure using subplots.
This script below uses a number of new commands. The function <code class="language-plaintext highlighter-rouge">matplotlib.pyplot.figure()</code>
creates a space into which we will place all of our plots. The parameter <code class="language-plaintext highlighter-rouge">figsize</code>
tells Python how big to make this space. Each subplot is placed into the figure using
its <code class="language-plaintext highlighter-rouge">add_subplot</code> <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#method">method</a>. The <code class="language-plaintext highlighter-rouge">add_subplot</code> method takes 3
parameters. The first denotes how many total rows of subplots there are, the second parameter
refers to the total number of subplot columns, and the final parameter denotes which subplot
your variable is referencing (left-to-right, top-to-bottom). Each subplot is stored in a
different variable (<code class="language-plaintext highlighter-rouge">axes1</code>, <code class="language-plaintext highlighter-rouge">axes2</code>, <code class="language-plaintext highlighter-rouge">axes3</code>). Once a subplot is created, the axes can
be titled using the <code class="language-plaintext highlighter-rouge">set_xlabel()</code> command (or <code class="language-plaintext highlighter-rouge">set_ylabel()</code>).
Here are our three plots side by side:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>

<span class="n">axes1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">axes2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes3</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">axes1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'average'</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">axes2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'max'</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'inflammation.png'</span><span class="p">)</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="./aio_files/inflammation-01-group-plot.svg" alt="The Previous Plots as Subplots"></p>

<p>The <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#function-call">call</a> to <code class="language-plaintext highlighter-rouge">loadtxt</code> reads our data,
and the rest of the program tells the plotting library
how large we want the figure to be,
that we’re creating three subplots,
what to draw for each one,
and that we want a tight layout.
(If we leave out that call to <code class="language-plaintext highlighter-rouge">fig.tight_layout()</code>,
the graphs will actually be squeezed together more closely.)</p>

<p>The call to <code class="language-plaintext highlighter-rouge">savefig</code> stores the plot as a graphics file. This can be
a convenient way to store your plots for use in other documents, web
pages etc. The graphics format is automatically determined by
Matplotlib from the file name ending we specify; here PNG from
‘inflammation.png’. Matplotlib supports many different graphics
formats, including SVG, PDF, and JPEG.</p>

<blockquote class="challenge">
  <h2 id="plot-scaling">Plot Scaling</h2>

  <p>Why do all of our plots stop just short of the upper end of our graph?</p>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Because matplotlib normally sets x and y axes limits to the min and max of our data
(depending on data range)</p>
  </blockquote>

  <p>If we want to change this, we can use the <code class="language-plaintext highlighter-rouge">set_ylim(min, max)</code> method of each ‘axes’,
for example:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">axes3</span><span class="p">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>Update your plotting code to automatically set a more appropriate scale.
(Hint: you can make use of the <code class="language-plaintext highlighter-rouge">max</code> and <code class="language-plaintext highlighter-rouge">min</code> methods to help.)</p>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="c1"># One method
</span><span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="c1"># A more automated approach
</span><span class="n">min_data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">min_data</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">min_data</span><span class="p">),</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">min_data</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="drawing-straight-lines">Drawing Straight Lines</h2>

  <p>In the center and right subplots above, we expect all lines to look like step functions because
non-integer value are not realistic for the minimum and maximum values. However, you can see
that the lines are not always vertical or horizontal, and in particular the step function
in the subplot on the right looks slanted. Why is this?</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Because matplotlib interpolates (draws a straight line) between the points.
One way to do avoid this is to use the Matplotlib <code class="language-plaintext highlighter-rouge">drawstyle</code> option:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>

<span class="n">axes1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">axes2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes3</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">axes1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'average'</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s">'steps-mid'</span><span class="p">)</span>

<span class="n">axes2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'max'</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s">'steps-mid'</span><span class="p">)</span>

<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s">'steps-mid'</span><span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>
    <p style="display: none;"><img src="./aio_files/inflammation-01-line-styles.svg" alt="Plot with step lines"></p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="make-your-own-plot">Make Your Own Plot</h2>

  <p>Create a plot showing the standard deviation (<code class="language-plaintext highlighter-rouge">numpy.std</code>)
of the inflammation data for each day across all patients.</p>

  <blockquote class="solution">
    <h2 id="solution-4">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">std_plot</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="moving-plots-around">Moving Plots Around</h2>

  <p>Modify the program to display the three plots on top of one another
instead of side by side.</p>

  <blockquote class="solution">
    <h2 id="solution-5">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="c1"># change figsize (swap width and height)
</span><span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">))</span>

<span class="c1"># change add_subplot (swap first two parameters)
</span><span class="n">axes1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">axes2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes3</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">axes1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'average'</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">axes2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'max'</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Use the <code class="language-plaintext highlighter-rouge">pyplot</code> module from the <code class="language-plaintext highlighter-rouge">matplotlib</code> library for creating simple visualizations.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="repeating-actions-with-loops" class="maintitle">Repeating Actions with Loops</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I do the same operations on many different values?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Explain what a <code class="language-plaintext highlighter-rouge">for</code> loop does.</p>
</li>
	
	<li><p>Correctly write <code class="language-plaintext highlighter-rouge">for</code> loops to repeat simple calculations.</p>
</li>
	
	<li><p>Trace changes to a loop variable as the loop runs.</p>
</li>
	
	<li><p>Trace changes to other variables as they are updated by a <code class="language-plaintext highlighter-rouge">for</code> loop.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>In the last episode, we wrote Python code that plots values of interest from our first
inflammation dataset (<code class="language-plaintext highlighter-rouge">inflammation-01.csv</code>), which revealed some suspicious features in it.</p>

<p><img src="./aio_files/03-loop_2_0.png" alt="Analysis of inflammation-01.csv"></p>

<p>We have a dozen data sets right now, though, and more on the way.
We want to create plots for all of our data sets with a single statement.
To do that, we’ll have to teach the computer how to repeat things.</p>

<p>An example task that we might want to repeat is printing each character in a
word on a line of its own.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word</span> <span class="o">=</span> <span class="s">'lead'</span>
</code></pre></div></div>

<p>In Python, a string is basically an ordered collection of characters, and every
character has a unique number associated with it – its index. This means that
we can access characters in a string using their indices.
For example, we can get the first character of the word <code class="language-plaintext highlighter-rouge">'lead'</code>, by using
<code class="language-plaintext highlighter-rouge">word[0]</code>. One way to print each character is to use four <code class="language-plaintext highlighter-rouge">print</code> statements:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>l
e
a
d
</code></pre></div></div>

<p>This is a bad approach for three reasons:</p>

<ol>
  <li>
    <p><strong>Not scalable</strong>. Imagine you need to print characters of a string that is hundreds
of letters long.  It might be easier to type them in manually.</p>
  </li>
  <li>
    <p><strong>Difficult to maintain</strong>. If we want to decorate each printed character with an
asterisk or any other character, we would have to change four lines of code. While
this might not be a problem for short strings, it would definitely be a problem for
longer ones.</p>
  </li>
  <li>
    <p><strong>Fragile</strong>. If we use it with a word that has more characters than what we initially
envisioned, it will only display part of the word’s characters. A shorter string, on
the other hand, will cause an error because it will be trying to display part of the
string that doesn’t exist.</p>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word</span> <span class="o">=</span> <span class="s">'tin'</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>t
i
n
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-3-7974b6cdaf14&gt; in &lt;module&gt;()
      3 print(word[1])
      4 print(word[2])
----&gt; 5 print(word[3])

IndexError: string index out of range
</code></pre></div></div>

<p>Here’s a better approach:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word</span> <span class="o">=</span> <span class="s">'lead'</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>

</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>l
e
a
d
</code></pre></div></div>

<p>This is shorter — certainly shorter than something that prints every character in a
hundred-letter string — and more robust as well:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word</span> <span class="o">=</span> <span class="s">'oxygen'</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>o
x
y
g
e
n
</code></pre></div></div>

<p>The improved version uses a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#for-loop">for loop</a>
to repeat an operation — in this case, printing — once for each thing in a sequence.
The general form of a loop is:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">collection</span><span class="p">:</span>
    <span class="c1"># do things using variable, such as print
</span></code></pre></div></div>

<p>Using the oxygen example above, the loop might look like this:</p>

<p><img src="./aio_files/loops_image.png" alt="loop_image"></p>

<p>where each character (<code class="language-plaintext highlighter-rouge">char</code>) in the variable <code class="language-plaintext highlighter-rouge">word</code> is looped through and printed one character
after another. The numbers in the diagram denote which loop cycle the character was printed in (1
being the first loop, and 6 being the final loop).</p>

<p>We can call the <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#loop-variable">loop variable</a> anything we like, but
there must be a colon at the end of the line starting the loop, and we must indent anything we
want to run inside the loop. Unlike many other languages, there is no command to signify the end
of the loop body (e.g. <code class="language-plaintext highlighter-rouge">end for</code>); what is indented after the <code class="language-plaintext highlighter-rouge">for</code> statement belongs to the loop.</p>

<blockquote class="callout">
  <h2 id="whats-in-a-name">What’s in a name?</h2>

  <p>In the example above, the loop variable was given the name <code class="language-plaintext highlighter-rouge">char</code> as a mnemonic;
it is short for ‘character’.  We can choose any name we want for variables.
We can even call our loop variable <code class="language-plaintext highlighter-rouge">banana</code>, as long as we use this name consistently:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word</span> <span class="o">=</span> <span class="s">'oxygen'</span>
<span class="k">for</span> <span class="n">banana</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">banana</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>o
x
y
g
e
n
</code></pre></div>  </div>

  <p>It is a good idea to choose variable names that are meaningful, otherwise it would be more
difficult to understand what the loop is doing.</p>
</blockquote>

<p>Here’s another loop that repeatedly updates a variable:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">vowel</span> <span class="ow">in</span> <span class="s">'aeiou'</span><span class="p">:</span>
    <span class="n">length</span> <span class="o">=</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="s">'There are'</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="s">'vowels'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>There are 5 vowels
</code></pre></div></div>

<p>It’s worth tracing the execution of this little program step by step.
Since there are five characters in <code class="language-plaintext highlighter-rouge">'aeiou'</code>,
the statement on line 3 will be executed five times.
The first time around,
<code class="language-plaintext highlighter-rouge">length</code> is zero (the value assigned to it on line 1)
and <code class="language-plaintext highlighter-rouge">vowel</code> is <code class="language-plaintext highlighter-rouge">'a'</code>.
The statement adds 1 to the old value of <code class="language-plaintext highlighter-rouge">length</code>,
producing 1,
and updates <code class="language-plaintext highlighter-rouge">length</code> to refer to that new value.
The next time around,
<code class="language-plaintext highlighter-rouge">vowel</code> is <code class="language-plaintext highlighter-rouge">'e'</code> and <code class="language-plaintext highlighter-rouge">length</code> is 1,
so <code class="language-plaintext highlighter-rouge">length</code> is updated to be 2.
After three more updates,
<code class="language-plaintext highlighter-rouge">length</code> is 5;
since there is nothing left in <code class="language-plaintext highlighter-rouge">'aeiou'</code> for Python to process,
the loop finishes
and the <code class="language-plaintext highlighter-rouge">print</code> statement on line 4 tells us our final answer.</p>

<p>Note that a loop variable is a variable that’s being used to record progress in a loop.
It still exists after the loop is over,
and we can re-use variables previously defined as loop variables as well:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">letter</span> <span class="o">=</span> <span class="s">'z'</span>
<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="s">'abc'</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'after the loop, letter is'</span><span class="p">,</span> <span class="n">letter</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a
b
c
after the loop, letter is c
</code></pre></div></div>

<p>Note also that finding the length of a string is such a common operation
that Python actually has a built-in function to do it called <code class="language-plaintext highlighter-rouge">len</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="s">'aeiou'</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">len</code> is much faster than any function we could write ourselves,
and much easier to read than a two-line loop;
it will also give us the length of many other things that we haven’t met yet,
so we should always use it when we can.</p>

<blockquote class="challenge">
  <h2 id="from-1-to-n">From 1 to N</h2>

  <p>Python has a built-in function called <code class="language-plaintext highlighter-rouge">range</code> that generates a sequence of numbers. <code class="language-plaintext highlighter-rouge">range</code> can
accept 1, 2, or 3 parameters.</p>

  <ul>
    <li>If one parameter is given, <code class="language-plaintext highlighter-rouge">range</code> generates a sequence of that length,
starting at zero and incrementing by 1.
For example, <code class="language-plaintext highlighter-rouge">range(3)</code> produces the numbers <code class="language-plaintext highlighter-rouge">0, 1, 2</code>.</li>
    <li>If two parameters are given, <code class="language-plaintext highlighter-rouge">range</code> starts at
the first and ends just before the second, incrementing by one.
For example, <code class="language-plaintext highlighter-rouge">range(2, 5)</code> produces <code class="language-plaintext highlighter-rouge">2, 3, 4</code>.</li>
    <li>If <code class="language-plaintext highlighter-rouge">range</code> is given 3 parameters,
it starts at the first one, ends just before the second one, and increments by the third one.
For example, <code class="language-plaintext highlighter-rouge">range(3, 10, 2)</code> produces <code class="language-plaintext highlighter-rouge">3, 5, 7, 9</code>.</li>
  </ul>

  <p>Using <code class="language-plaintext highlighter-rouge">range</code>,
write a loop that uses <code class="language-plaintext highlighter-rouge">range</code> to print the first 3 natural numbers:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="understanding-the-loops">Understanding the loops</h2>

  <p>Given the following loop:</p>
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word</span> <span class="o">=</span> <span class="s">'oxygen'</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>How many times is the body of the loop executed?</p>

  <ul>
    <li>3 times</li>
    <li>4 times</li>
    <li>5 times</li>
    <li>6 times</li>
  </ul>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>

    <p style="display: none;">The body of the loop is executed 6 times.</p>

  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="computing-powers-with-loops">Computing Powers With Loops</h2>

  <p>Exponentiation is built into Python:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="mi">5</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>125
</code></pre></div>  </div>

  <p>Write a loop that calculates the same result as <code class="language-plaintext highlighter-rouge">5 ** 3</code> using
multiplication (and without exponentiation).</p>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="mi">5</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="reverse-a-string">Reverse a String</h2>

  <p>Knowing that two strings can be concatenated using the <code class="language-plaintext highlighter-rouge">+</code> operator,
write a loop that takes a string
and produces a new string with the characters in reverse order,
so <code class="language-plaintext highlighter-rouge">'Newton'</code> becomes <code class="language-plaintext highlighter-rouge">'notweN'</code>.</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">newstring</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">oldstring</span> <span class="o">=</span> <span class="s">'Newton'</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">oldstring</span><span class="p">:</span>
    <span class="n">newstring</span> <span class="o">=</span> <span class="n">char</span> <span class="o">+</span> <span class="n">newstring</span>
<span class="k">print</span><span class="p">(</span><span class="n">newstring</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="computing-the-value-of-a-polynomial">Computing the Value of a Polynomial</h2>

  <p>The built-in function <code class="language-plaintext highlighter-rouge">enumerate</code> takes a sequence (e.g. a list) and generates a
new sequence of the same length. Each element of the new sequence is a pair composed of the index
(0, 1, 2,…) and the value from the original sequence:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">a_list</span><span class="p">):</span>
    <span class="c1"># Do something using idx and val
</span></code></pre></div>  </div>

  <p>The code above loops through <code class="language-plaintext highlighter-rouge">a_list</code>, assigning the index to <code class="language-plaintext highlighter-rouge">idx</code> and the value to <code class="language-plaintext highlighter-rouge">val</code>.</p>

  <p>Suppose you have encoded a polynomial as a list of coefficients in
the following way: the first element is the constant term, the
second element is the coefficient of the linear term, the third is the
coefficient of the quadratic term, etc.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">coefs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">coefs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">0</span> <span class="o">+</span> <span class="n">coefs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">1</span> <span class="o">+</span> <span class="n">coefs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>97
</code></pre></div>  </div>

  <p>Write a loop using <code class="language-plaintext highlighter-rouge">enumerate(coefs)</code> which computes the value <code class="language-plaintext highlighter-rouge">y</code> of any
polynomial, given <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">coefs</code>.</p>

  <blockquote class="solution">
    <h2 id="solution-4">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coefs</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="n">idx</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">for variable in sequence</code> to process the elements of a sequence one at a time.</p>
</li>
    
    <li><p>The body of a <code class="language-plaintext highlighter-rouge">for</code> loop must be indented.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">len(thing)</code> to determine the length of something that contains other values.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="storing-multiple-values-in-lists" class="maintitle">Storing Multiple Values in Lists</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 15 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I store many values together?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Explain what a list is.</p>
</li>
	
	<li><p>Create and index lists of simple values.</p>
</li>
	
	<li><p>Change the values of individual elements</p>
</li>
	
	<li><p>Append values to an existing list</p>
</li>
	
	<li><p>Reorder and slice list elements</p>
</li>
	
	<li><p>Create and manipulate nested lists</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>Similar to a string that can contain many characters, a list is a container that can store many values.
Unlike NumPy arrays,
lists are built into the language (so we don’t have to load a library
to use them).
We create a list by putting values inside square brackets and separating the values with commas:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'odds are:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>odds are: [1, 3, 5, 7]
</code></pre></div></div>

<p>We can access elements of a list using indices – numbered positions of elements in the list.
These positions are numbered starting at 0, so the first element has an index of 0.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'first element:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last element:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'"-1" element:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>first element: 1
last element: 7
"-1" element: 7
</code></pre></div></div>

<p>Yes, we can use negative numbers as indices in Python. When we do so, the index <code class="language-plaintext highlighter-rouge">-1</code> gives us the
last element in the list, <code class="language-plaintext highlighter-rouge">-2</code> the second to last, and so on.
Because of this, <code class="language-plaintext highlighter-rouge">odds[3]</code> and <code class="language-plaintext highlighter-rouge">odds[-1]</code> point to the same element here.</p>

<p>If we loop over a list, the loop variable is assigned to its elements one at a time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">odds</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
3
5
7
</code></pre></div></div>

<p>There is one important difference between lists and strings:
we can change the values in a list,
but we cannot change individual characters in a string.
For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Curie'</span><span class="p">,</span> <span class="s">'Darwing'</span><span class="p">,</span> <span class="s">'Turing'</span><span class="p">]</span>  <span class="c1"># typo in Darwin's name
</span><span class="k">print</span><span class="p">(</span><span class="s">'names is originally:'</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
<span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Darwin'</span>  <span class="c1"># correct the name
</span><span class="k">print</span><span class="p">(</span><span class="s">'final value of names:'</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>names is originally: ['Curie', 'Darwing', 'Turing']
final value of names: ['Curie', 'Darwin', 'Turing']
</code></pre></div></div>

<p>works, but:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="s">'Darwin'</span>
<span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">'d'</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-8-220df48aeb2e&gt; in &lt;module&gt;()
      1 name = 'Darwin'
----&gt; 2 name[0] = 'd'

TypeError: 'str' object does not support item assignment
</code></pre></div></div>

<p>does not.</p>

<blockquote class="callout">
  <h2 id="ch-ch-ch-ch-changes">Ch-Ch-Ch-Ch-Changes</h2>

  <p>Data which can be modified in place is called <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#mutable">mutable</a>,
while data which cannot be modified is called <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#immutable">immutable</a>.
Strings and numbers are immutable. This does not mean that variables with string or number values
are constants, but when we want to change the value of a string or number variable, we can only
replace the old value with a completely new value.</p>

  <p>Lists and arrays, on the other hand, are mutable: we can modify them after they have been
created. We can change individual elements, append new elements, or reorder the whole list. For
some operations, like sorting, we can choose whether to use a function that modifies the data
in-place or a function that returns a modified copy and leaves the original unchanged.</p>

  <p>Be careful when modifying data in-place. If two variables refer to the same list, and you modify
the list value, it will change for both variables!</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">salsa</span> <span class="o">=</span> <span class="p">[</span><span class="s">'peppers'</span><span class="p">,</span> <span class="s">'onions'</span><span class="p">,</span> <span class="s">'cilantro'</span><span class="p">,</span> <span class="s">'tomatoes'</span><span class="p">]</span>
<span class="n">my_salsa</span> <span class="o">=</span> <span class="n">salsa</span>        <span class="c1"># &lt;-- my_salsa and salsa point to the *same* list data in memory
</span><span class="n">salsa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">'hot peppers'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Ingredients in my salsa:'</span><span class="p">,</span> <span class="n">my_salsa</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ingredients in my salsa: ['hot peppers', 'onions', 'cilantro', 'tomatoes']
</code></pre></div>  </div>

  <p>If you want variables with mutable values to be independent, you
must make a copy of the value when you assign it.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">salsa</span> <span class="o">=</span> <span class="p">[</span><span class="s">'peppers'</span><span class="p">,</span> <span class="s">'onions'</span><span class="p">,</span> <span class="s">'cilantro'</span><span class="p">,</span> <span class="s">'tomatoes'</span><span class="p">]</span>
<span class="n">my_salsa</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">salsa</span><span class="p">)</span>        <span class="c1"># &lt;-- makes a *copy* of the list
</span><span class="n">salsa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">'hot peppers'</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Ingredients in my salsa:'</span><span class="p">,</span> <span class="n">my_salsa</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ingredients in my salsa: ['peppers', 'onions', 'cilantro', 'tomatoes']
</code></pre></div>  </div>

  <p>Because of pitfalls like this, code which modifies data in place can be more difficult to
understand. However, it is often far more efficient to modify a large data structure in place
than to create a modified copy for every small change. You should consider both of these aspects
when writing your code.</p>
</blockquote>

<blockquote class="callout">
  <h2 id="nested-lists">Nested Lists</h2>
  <p>Since a list can contain any Python variables, it can even contain other lists.</p>

  <p>For example, we could represent the products in the shelves of a small grocery shop:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="s">'pepper'</span><span class="p">,</span> <span class="s">'zucchini'</span><span class="p">,</span> <span class="s">'onion'</span><span class="p">],</span>
     <span class="p">[</span><span class="s">'cabbage'</span><span class="p">,</span> <span class="s">'lettuce'</span><span class="p">,</span> <span class="s">'garlic'</span><span class="p">],</span>
     <span class="p">[</span><span class="s">'apple'</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">]]</span>
</code></pre></div>  </div>

  <p>Here is a visual example of how indexing a list of lists <code class="language-plaintext highlighter-rouge">x</code> works:</p>

  <p><a href="https://twitter.com/hadleywickham/status/643381054758363136"><img src="./aio_files/indexing_lists_python.png" alt="x is represented as a pepper shaker containing several packets of pepper. [x[0]] is represented
as a pepper shaker containing a single packet of pepper. x[0] is represented as a single packet of
pepper. x[0][0] is represented as single grain of pepper.  Adapted 
from @hadleywickham."></a></p>

  <p>Using the previously declared list <code class="language-plaintext highlighter-rouge">x</code>, these would be the results of the
index operations shown in the image:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[['pepper', 'zucchini', 'onion']]
</code></pre></div>  </div>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['pepper', 'zucchini', 'onion']
</code></pre></div>  </div>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'pepper'
</code></pre></div>  </div>

  <p>Thanks to <a href="https://twitter.com/hadleywickham/status/643381054758363136">Hadley Wickham</a>
for the image above.</p>
</blockquote>

<blockquote class="callout">
  <h2 id="heterogeneous-lists">Heterogeneous Lists</h2>
  <p>Lists in Python can contain elements of different types. Example:</p>
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sample_ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mf">12.5</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">]</span>
</code></pre></div>  </div>
</blockquote>

<p>There are many ways to change the contents of lists besides assigning new values to
individual elements:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odds</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'odds after adding a value:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>odds after adding a value: [1, 3, 5, 7, 11]
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">removed_element</span> <span class="o">=</span> <span class="n">odds</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'odds after removing the first element:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'removed_element:'</span><span class="p">,</span> <span class="n">removed_element</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>odds after removing the first element: [3, 5, 7, 11]
removed_element: 1
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odds</span><span class="p">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'odds after reversing:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>odds after reversing: [11, 7, 5, 3]
</code></pre></div></div>

<p>While modifying in place, it is useful to remember that Python treats lists in a slightly
counter-intuitive way.</p>

<p>As we saw earlier, when we modified the <code class="language-plaintext highlighter-rouge">salsa</code> list item in-place, if we make a list, (attempt to) copy it and then modify this list, we can cause all sorts of trouble. This also applies to modifying the list using the above functions:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">primes</span> <span class="o">=</span> <span class="n">odds</span>
<span class="n">primes</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'primes:'</span><span class="p">,</span> <span class="n">primes</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'odds:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>primes: [1, 3, 5, 7, 2]
odds: [1, 3, 5, 7, 2]
</code></pre></div></div>

<p>This is because Python stores a list in memory, and then can use multiple names to refer to the
same list. If all we want to do is copy a (simple) list, we can again use the <code class="language-plaintext highlighter-rouge">list</code> function, so we do
not modify a list we did not mean to:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">primes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">odds</span><span class="p">)</span>
<span class="n">primes</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'primes:'</span><span class="p">,</span> <span class="n">primes</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'odds:'</span><span class="p">,</span> <span class="n">odds</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>primes: [1, 3, 5, 7, 2]
odds: [1, 3, 5, 7]
</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="turn-a-string-into-a-list">Turn a String Into a List</h2>

  <p>Use a for-loop to convert the string “hello” into a list of letters:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="s">'h'</span><span class="p">,</span> <span class="s">'e'</span><span class="p">,</span> <span class="s">'l'</span><span class="p">,</span> <span class="s">'l'</span><span class="p">,</span> <span class="s">'o'</span><span class="p">]</span>
</code></pre></div>  </div>

  <p>Hint: You can create an empty list like this:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">my_list</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">my_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s">'hello'</span><span class="p">:</span>
    <span class="n">my_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<p>Subsets of lists and strings can be accessed by specifying ranges of values in brackets,
similar to how we accessed ranges of positions in a NumPy array.
This is commonly referred to as “slicing” the list/string.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">binomial_name</span> <span class="o">=</span> <span class="s">'Drosophila melanogaster'</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">binomial_name</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'group:'</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>

<span class="n">species</span> <span class="o">=</span> <span class="n">binomial_name</span><span class="p">[</span><span class="mi">11</span><span class="p">:</span><span class="mi">23</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'species:'</span><span class="p">,</span> <span class="n">species</span><span class="p">)</span>

<span class="n">chromosomes</span> <span class="o">=</span> <span class="p">[</span><span class="s">'X'</span><span class="p">,</span> <span class="s">'Y'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">]</span>
<span class="n">autosomes</span> <span class="o">=</span> <span class="n">chromosomes</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'autosomes:'</span><span class="p">,</span> <span class="n">autosomes</span><span class="p">)</span>

<span class="n">last</span> <span class="o">=</span> <span class="n">chromosomes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'last:'</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>group: Drosophila
species: melanogaster
autosomes: ['2', '3', '4']
last: 4
</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="slicing-from-the-end">Slicing From the End</h2>

  <p>Use slicing to access only the last four characters of a string or entries of a list.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">string_for_slicing</span> <span class="o">=</span> <span class="s">'Observation date: 02-Feb-2013'</span>
<span class="n">list_for_slicing</span> <span class="o">=</span> <span class="p">[[</span><span class="s">'fluorine'</span><span class="p">,</span> <span class="s">'F'</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">'chlorine'</span><span class="p">,</span> <span class="s">'Cl'</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">'bromine'</span><span class="p">,</span> <span class="s">'Br'</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">'iodine'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">'astatine'</span><span class="p">,</span> <span class="s">'At'</span><span class="p">]]</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'2013'
[['chlorine', 'Cl'], ['bromine', 'Br'], ['iodine', 'I'], ['astatine', 'At']]
</code></pre></div>  </div>

  <p>Would your solution work regardless of whether you knew beforehand
the length of the string or list
(e.g. if you wanted to apply the solution to a set of lists of different lengths)?
If not, try to change your approach to make it more robust.</p>

  <p>Hint: Remember that indices can be negative as well as positive</p>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Use negative indices to count elements from the end of a container (such as list or string):</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">string_for_slicing</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
<span class="n">list_for_slicing</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="non-continuous-slices">Non-Continuous Slices</h2>

  <p>So far we’ve seen how to use slicing to take single blocks
of successive entries from a sequence.
But what if we want to take a subset of entries
that aren’t next to each other in the sequence?</p>

  <p>You can achieve this by providing a third argument
to the range within the brackets, called the <em>step size</em>.
The example below shows how you can take every third entry in a list:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">primes</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'subset'</span><span class="p">,</span> <span class="n">subset</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subset [2, 7, 17, 29]
</code></pre></div>  </div>

  <p>Notice that the slice taken begins with the first entry in the range,
followed by entries taken at equally-spaced intervals (the steps) thereafter.
If you wanted to begin the subset with the third entry,
you would need to specify that as the starting point of the sliced range:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">primes</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'subset'</span><span class="p">,</span> <span class="n">subset</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subset [5, 13, 23, 37]
</code></pre></div>  </div>

  <p>Use the step size argument to create a new string
that contains only every other character in the string
“In an octopus’s garden in the shade”. Start with
creating a variable to hold the string:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">beatles</span> <span class="o">=</span> <span class="s">"In an octopus's garden in the shade"</span>
</code></pre></div>  </div>

  <p>What slice of <code class="language-plaintext highlighter-rouge">beatles</code> will produce the
following output (i.e., the first character, third
character, and every other character through the end
of the string)?</p>
  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>I notpssgre ntesae
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">To obtain every other character you need to provide a slice with the step
size of 2:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">beatles</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div>    </div>

    <p style="display: none;">You can also leave out the beginning and end of the slice to take the whole string
and provide only the step argument to go every second
element:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">beatles</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<p>If you want to take a slice from the beginning of a sequence, you can omit the first index in the
range:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="s">'Monday 4 January 2016'</span>
<span class="n">day</span> <span class="o">=</span> <span class="n">date</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Using 0 to begin range:'</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
<span class="n">day</span> <span class="o">=</span> <span class="n">date</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Omitting beginning index:'</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Using 0 to begin range: Monday
Omitting beginning index: Monday
</code></pre></div></div>

<p>And similarly, you can omit the ending index in the range to take a slice to the very end of the
sequence:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">months</span> <span class="o">=</span> <span class="p">[</span><span class="s">'jan'</span><span class="p">,</span> <span class="s">'feb'</span><span class="p">,</span> <span class="s">'mar'</span><span class="p">,</span> <span class="s">'apr'</span><span class="p">,</span> <span class="s">'may'</span><span class="p">,</span> <span class="s">'jun'</span><span class="p">,</span> <span class="s">'jul'</span><span class="p">,</span> <span class="s">'aug'</span><span class="p">,</span> <span class="s">'sep'</span><span class="p">,</span> <span class="s">'oct'</span><span class="p">,</span> <span class="s">'nov'</span><span class="p">,</span> <span class="s">'dec'</span><span class="p">]</span>
<span class="n">sond</span> <span class="o">=</span> <span class="n">months</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">12</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'With known last position:'</span><span class="p">,</span> <span class="n">sond</span><span class="p">)</span>
<span class="n">sond</span> <span class="o">=</span> <span class="n">months</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">months</span><span class="p">)]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Using len() to get last entry:'</span><span class="p">,</span> <span class="n">sond</span><span class="p">)</span>
<span class="n">sond</span> <span class="o">=</span> <span class="n">months</span><span class="p">[</span><span class="mi">8</span><span class="p">:]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Omitting ending index:'</span><span class="p">,</span> <span class="n">sond</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>With known last position: ['sep', 'oct', 'nov', 'dec']
Using len() to get last entry: ['sep', 'oct', 'nov', 'dec']
Omitting ending index: ['sep', 'oct', 'nov', 'dec']
</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="overloading">Overloading</h2>

  <p><code class="language-plaintext highlighter-rouge">+</code> usually means addition, but when used on strings or lists, it means “concatenate”.
Given that, what do you think the multiplication operator <code class="language-plaintext highlighter-rouge">*</code> does on lists?
In particular, what will be the output of the following code?</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">repeats</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">*</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">repeats</span><span class="p">)</span>
</code></pre></div>  </div>

  <ol>
    <li><code class="language-plaintext highlighter-rouge">[2, 4, 6, 8, 10, 2, 4, 6, 8, 10]</code></li>
    <li><code class="language-plaintext highlighter-rouge">[4, 8, 12, 16, 20]</code></li>
    <li><code class="language-plaintext highlighter-rouge">[[2, 4, 6, 8, 10],[2, 4, 6, 8, 10]]</code></li>
    <li><code class="language-plaintext highlighter-rouge">[2, 4, 6, 8, 10, 4, 8, 12, 16, 20]</code></li>
  </ol>

  <p>The technical term for this is <em>operator overloading</em>:
a single operator, like <code class="language-plaintext highlighter-rouge">+</code> or <code class="language-plaintext highlighter-rouge">*</code>,
can do different things depending on what it’s applied to.</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>

    <p style="display: none;">The multiplication operator <code class="language-plaintext highlighter-rouge">*</code> used on a list replicates elements of the list and concatenates
them together:</p>

    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>[2, 4, 6, 8, 10, 2, 4, 6, 8, 10]
</code></pre></div>    </div>

    <p style="display: none;">It’s equivalent to:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">counts</span> <span class="o">+</span> <span class="n">counts</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p><code class="language-plaintext highlighter-rouge">[value1, value2, value3, ...]</code> creates a list.</p>
</li>
    
    <li><p>Lists can contain any Python object, including lists (i.e., list of lists).</p>
</li>
    
    <li><p>Lists are indexed and sliced with square brackets (e.g., list[0] and list[2:9]), in the same way as strings and arrays.</p>
</li>
    
    <li><p>Lists are mutable (i.e., their values can be changed in place).</p>
</li>
    
    <li><p>Strings are immutable (i.e., the characters in them cannot be changed).</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="analyzing-data-from-multiple-files" class="maintitle">Analyzing Data from Multiple Files</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 20 min
      <br>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I do the same operations on many different files?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Use a library function to get a list of filenames that match a wildcard pattern.</p>
</li>
	
	<li><p>Write a <code class="language-plaintext highlighter-rouge">for</code> loop to process multiple files.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>We now have almost everything we need to process all our data files.
The only thing that’s missing is a library with a rather unpleasant name:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">glob</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">glob</code> library contains a function, also called <code class="language-plaintext highlighter-rouge">glob</code>,
that finds files and directories whose names match a pattern.
We provide those patterns as strings:
the character <code class="language-plaintext highlighter-rouge">*</code> matches zero or more characters,
while <code class="language-plaintext highlighter-rouge">?</code> matches any one character.
We can use this to get the names of all the CSV files in the current directory:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'inflammation*.csv'</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['inflammation-05.csv', 'inflammation-11.csv', 'inflammation-12.csv', 'inflammation-08.csv',
'inflammation-03.csv', 'inflammation-06.csv', 'inflammation-09.csv', 'inflammation-07.csv',
'inflammation-10.csv', 'inflammation-02.csv', 'inflammation-04.csv', 'inflammation-01.csv']
</code></pre></div></div>

<p>As these examples show,
<code class="language-plaintext highlighter-rouge">glob.glob</code>’s result is a list of file and directory paths in arbitrary order.
This means we can loop over it
to do something with each filename in turn.
In our case,
the “something” we want to do is generate a set of plots for each file in our inflammation dataset.
If we want to start by analyzing just the first three files in alphabetical order, we can use the
<code class="language-plaintext highlighter-rouge">sorted</code> built-in function to generate a new sorted list from the <code class="language-plaintext highlighter-rouge">glob.glob</code> output:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>

<span class="n">filenames</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'inflammation*.csv'</span><span class="p">))</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>

    <span class="n">axes1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">axes2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">axes3</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">axes1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'average'</span><span class="p">)</span>
    <span class="n">axes1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">axes2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'max'</span><span class="p">)</span>
    <span class="n">axes2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
    <span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>inflammation-01.csv
</code></pre></div></div>

<p><img src="./aio_files/03-loop_49_1.png" alt="Analysis of inflammation-01.csv"></p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>inflammation-02.csv
</code></pre></div></div>

<p><img src="./aio_files/03-loop_49_3.png" alt="Analysis of inflammation-02.csv"></p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>inflammation-03.csv
</code></pre></div></div>

<p><img src="./aio_files/03-loop_49_5.png" alt="Analysis of inflammation-03.csv"></p>

<p>Sure enough,
the maxima of the first two data sets show exactly the same ramp as the first,
and their minima show the same staircase structure;
a different situation has been revealed in the third dataset,
where the maxima are a bit less regular, but the minima are consistently zero.</p>

<blockquote class="challenge">
  <h2 id="plotting-differences">Plotting Differences</h2>

  <p>Plot the difference between the average inflammations reported in the first and second datasets
(stored in <code class="language-plaintext highlighter-rouge">inflammation-01.csv</code> and <code class="language-plaintext highlighter-rouge">inflammation-02.csv</code>, correspondingly),
i.e., the difference between the leftmost plots of the first two figures.</p>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>

<span class="n">filenames</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'inflammation*.csv'</span><span class="p">))</span>

<span class="n">data0</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
<span class="n">data1</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">filenames</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>

<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Difference in average'</span><span class="p">)</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="generate-composite-statistics">Generate Composite Statistics</h2>

  <p>Use each of the files once to generate a dataset containing values averaged over all patients:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'inflammation*.csv'</span><span class="p">)</span>
<span class="n">composite_data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>
<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="c1"># sum each new file's data into composite_data as it's read
</span>    <span class="c1">#
# and then divide the composite_data by number of samples
</span><span class="n">composite_data</span> <span class="o">=</span> <span class="n">composite_data</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>Then use pyplot to generate average, max, and min for all patients.</p>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>

<span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'inflammation*.csv'</span><span class="p">)</span>
<span class="n">composite_data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>

<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span> <span class="o">=</span> <span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
    <span class="n">composite_data</span> <span class="o">=</span> <span class="n">composite_data</span> <span class="o">+</span> <span class="n">data</span>

<span class="n">composite_data</span> <span class="o">=</span> <span class="n">composite_data</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>

<span class="n">axes1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">axes2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes3</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">axes1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'average'</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">composite_data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">axes2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'max'</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">composite_data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
<span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">composite_data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">glob.glob(pattern)</code> to create a list of files whose names match a pattern.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">*</code> in a pattern to match zero or more characters, and <code class="language-plaintext highlighter-rouge">?</code> to match any single character.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="making-choices" class="maintitle">Making Choices</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can my programs do different things based on data values?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Write conditional statements including <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">elif</code>, and <code class="language-plaintext highlighter-rouge">else</code> branches.</p>
</li>
	
	<li><p>Correctly evaluate expressions containing <code class="language-plaintext highlighter-rouge">and</code> and <code class="language-plaintext highlighter-rouge">or</code>.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>In our last lesson, we discovered something suspicious was going on
in our inflammation data by drawing some plots.
How can we use Python to automatically recognize the different features we saw,
and take a different action for each? In this lesson, we’ll learn how to write code that
runs only when certain conditions are true.</p>

<h2 id="conditionals">Conditionals</h2>

<p>We can ask Python to take different actions, depending on a condition, with an <code class="language-plaintext highlighter-rouge">if</code> statement:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num</span> <span class="o">=</span> <span class="mi">37</span>
<span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'greater'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'not greater'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'done'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>not greater
done
</code></pre></div></div>

<p>The second line of this code uses the keyword <code class="language-plaintext highlighter-rouge">if</code> to tell Python that we want to make a choice.
If the test that follows the <code class="language-plaintext highlighter-rouge">if</code> statement is true,
the body of the <code class="language-plaintext highlighter-rouge">if</code>
(i.e., the set of lines indented underneath it) is executed, and “greater” is printed.
If the test is false,
the body of the <code class="language-plaintext highlighter-rouge">else</code> is executed instead, and “not greater” is printed.
Only one or the other is ever executed before continuing on with program execution to print “done”:</p>

<p><img src="./aio_files/python-flowchart-conditional.png" alt="A flowchart diagram of the if-else construct that tests if variable num is greater than 100"></p>

<p>Conditional statements don’t have to include an <code class="language-plaintext highlighter-rouge">else</code>.
If there isn’t one,
Python simply does nothing if the test is false:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num</span> <span class="o">=</span> <span class="mi">53</span>
<span class="k">print</span><span class="p">(</span><span class="s">'before conditional...'</span><span class="p">)</span>
<span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span><span class="s">' is greater than 100'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'...after conditional'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>before conditional...
...after conditional
</code></pre></div></div>

<p>We can also chain several tests together using <code class="language-plaintext highlighter-rouge">elif</code>,
which is short for “else if”.
The following Python code uses <code class="language-plaintext highlighter-rouge">elif</code> to print the sign of a number.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

<span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">'is positive'</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">'is zero'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">'is negative'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-3 is negative
</code></pre></div></div>

<p>Note that to test for equality we use a double equals sign <code class="language-plaintext highlighter-rouge">==</code>
rather than a single equals sign <code class="language-plaintext highlighter-rouge">=</code> which is used to assign values.</p>

<p>We can also combine tests using <code class="language-plaintext highlighter-rouge">and</code> and <code class="language-plaintext highlighter-rouge">or</code>.
<code class="language-plaintext highlighter-rouge">and</code> is only true if both parts are true:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'both parts are true'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'at least one part is false'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>at least one part is false
</code></pre></div></div>

<p>while <code class="language-plaintext highlighter-rouge">or</code> is true if at least one part is true:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'at least one test is true'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>at least one test is true
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="true-and-false"><code class="language-plaintext highlighter-rouge">True</code> and <code class="language-plaintext highlighter-rouge">False</code></h2>
  <p><code class="language-plaintext highlighter-rouge">True</code> and <code class="language-plaintext highlighter-rouge">False</code> are special words in Python called <code class="language-plaintext highlighter-rouge">booleans</code>,
which represent truth values. A statement such as <code class="language-plaintext highlighter-rouge">1 &lt; 0</code> returns
the value <code class="language-plaintext highlighter-rouge">False</code>, while <code class="language-plaintext highlighter-rouge">-1 &lt; 0</code> returns the value <code class="language-plaintext highlighter-rouge">True</code>.</p>
</blockquote>

<h2 id="checking-our-data">Checking our Data</h2>

<p>Now that we’ve seen how conditionals work,
we can use them to check for the suspicious features we saw in our inflammation data.
We are about to use functions provided by the <code class="language-plaintext highlighter-rouge">numpy</code> module again.
Therefore, if you’re working in a new Python session, make sure to load the
module with:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span>
</code></pre></div></div>

<p>From the first couple of plots, we saw that maximum daily inflammation exhibits
a strange behavior and raises one unit a day.
Wouldn’t it be a good idea to detect such behavior and report it as suspicious?
Let’s do that!
However, instead of checking every single day of the study, let’s merely check
if maximum inflammation in the beginning (day 0) and in the middle (day 20) of
the study are equal to the corresponding day numbers.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">max_inflammation_0</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">max_inflammation_20</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">20</span><span class="p">]</span>

<span class="k">if</span> <span class="n">max_inflammation_0</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">max_inflammation_20</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Suspicious looking maxima!'</span><span class="p">)</span>
</code></pre></div></div>

<p>We also saw a different problem in the third dataset;
the minima per day were all zero (looks like a healthy person snuck into our study).
We can also check for this with an <code class="language-plaintext highlighter-rouge">elif</code> condition:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">elif</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Minima add up to zero!'</span><span class="p">)</span>
</code></pre></div></div>

<p>And if neither of these conditions are true, we can use <code class="language-plaintext highlighter-rouge">else</code> to give the all-clear:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Seems OK!'</span><span class="p">)</span>
</code></pre></div></div>

<p>Let’s test that out:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">max_inflammation_0</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">max_inflammation_20</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">20</span><span class="p">]</span>

<span class="k">if</span> <span class="n">max_inflammation_0</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">max_inflammation_20</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Suspicious looking maxima!'</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Minima add up to zero!'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Seems OK!'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Suspicious looking maxima!
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-03.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">max_inflammation_0</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">max_inflammation_20</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">20</span><span class="p">]</span>

<span class="k">if</span> <span class="n">max_inflammation_0</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">max_inflammation_20</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Suspicious looking maxima!'</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Minima add up to zero!'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Seems OK!'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Minima add up to zero!
</code></pre></div></div>

<p>In this way,
we have asked Python to do something different depending on the condition of our data.
Here we printed messages in all cases,
but we could also imagine not using the <code class="language-plaintext highlighter-rouge">else</code> catch-all
so that messages are only printed when something is wrong,
freeing us from having to manually examine every plot for features we’ve seen before.</p>

<blockquote class="challenge">
  <h2 id="how-many-paths">How Many Paths?</h2>

  <p>Consider this code:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="mi">4</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'A'</span><span class="p">)</span>
<span class="k">elif</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'B'</span><span class="p">)</span>
<span class="k">elif</span> <span class="mi">4</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'C'</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>Which of the following would be printed if you were to run this code?
Why did you pick this answer?</p>

  <ol>
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>B and C</li>
  </ol>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">C gets printed because the first two conditions, <code class="language-plaintext highlighter-rouge">4 &gt; 5</code> and <code class="language-plaintext highlighter-rouge">4 == 5</code>, are not true,
but <code class="language-plaintext highlighter-rouge">4 &lt; 5</code> is true.</p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="what-is-truth">What Is Truth?</h2>

  <p><code class="language-plaintext highlighter-rouge">True</code> and <code class="language-plaintext highlighter-rouge">False</code> booleans are not the only values in Python that are true and false.
In fact, <em>any</em> value can be used in an <code class="language-plaintext highlighter-rouge">if</code> or <code class="language-plaintext highlighter-rouge">elif</code>.
After reading and running the code below,
explain what the rule is for which values are considered true and which are considered false.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="s">''</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'empty string is true'</span><span class="p">)</span>
<span class="k">if</span> <span class="s">'word'</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'word is true'</span><span class="p">)</span>
<span class="k">if</span> <span class="p">[]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'empty list is true'</span><span class="p">)</span>
<span class="k">if</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'non-empty list is true'</span><span class="p">)</span>
<span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'zero is true'</span><span class="p">)</span>
<span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'one is true'</span><span class="p">)</span>
</code></pre></div>  </div>
</blockquote>

<blockquote class="challenge">
  <h2 id="thats-not-not-what-i-meant">That’s Not Not What I Meant</h2>

  <p>Sometimes it is useful to check whether some condition is not true.
The Boolean operator <code class="language-plaintext highlighter-rouge">not</code> can do this explicitly.
After reading and running the code below,
write some <code class="language-plaintext highlighter-rouge">if</code> statements that use <code class="language-plaintext highlighter-rouge">not</code> to test the rule
that you formulated in the previous challenge.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="ow">not</span> <span class="s">''</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'empty string is not true'</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="s">'word'</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'word is not true'</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'not not True is true'</span><span class="p">)</span>
</code></pre></div>  </div>
</blockquote>

<blockquote class="challenge">
  <h2 id="close-enough">Close Enough</h2>

  <p>Write some conditions that print <code class="language-plaintext highlighter-rouge">True</code> if the variable <code class="language-plaintext highlighter-rouge">a</code> is within 10% of the variable <code class="language-plaintext highlighter-rouge">b</code>
and <code class="language-plaintext highlighter-rouge">False</code> otherwise.
Compare your implementation with your partner’s:
do you get the same answer for all possible pairs of numbers?</p>

  <blockquote class="solution">
    <h2 id="hint">Hint<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">There is a <a href="https://docs.python.org/3/library/functions.html#abs">built-in function <code class="language-plaintext highlighter-rouge">abs</code></a> that returns the absolute value of
a number:</p>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="mi">12</span><span class="p">))</span>
</code></pre></div>    </div>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>12
</code></pre></div>    </div>
  </blockquote>

  <blockquote class="solution">
    <h2 id="solution-1">Solution 1<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">5.1</span>

<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'True'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'False'</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>

  <blockquote class="solution">
    <h2 id="solution-2">Solution 2<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</code></pre></div>    </div>

    <p style="display: none;">This works because the Booleans <code class="language-plaintext highlighter-rouge">True</code> and <code class="language-plaintext highlighter-rouge">False</code>
have string representations which can be printed.</p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="in-place-operators">In-Place Operators</h2>

  <p>Python (and most other languages in the C family) provides
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#in-place-operators">in-place operators</a>
that work like this:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># original value
</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># add one to x, assigning result back to x
</span><span class="n">x</span> <span class="o">*=</span> <span class="mi">3</span> <span class="c1"># multiply x by 3
</span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>6
</code></pre></div>  </div>

  <p>Write some code that sums the positive and negative numbers in a list separately,
using in-place operators.
Do you think the result is more or less readable
than writing the same without in-place operators?</p>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">positive_sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">negative_sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">]</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">test_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">positive_sum</span> <span class="o">+=</span> <span class="n">num</span>
    <span class="k">elif</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">negative_sum</span> <span class="o">+=</span> <span class="n">num</span>
<span class="k">print</span><span class="p">(</span><span class="n">positive_sum</span><span class="p">,</span> <span class="n">negative_sum</span><span class="p">)</span>
</code></pre></div>    </div>

    <p style="display: none;">Here <code class="language-plaintext highlighter-rouge">pass</code> means “don’t do anything”.
In this particular case, it’s not actually needed, since if <code class="language-plaintext highlighter-rouge">num == 0</code> neither
sum needs to change, but it illustrates the use of <code class="language-plaintext highlighter-rouge">elif</code> and <code class="language-plaintext highlighter-rouge">pass</code>.</p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="sorting-a-list-into-buckets">Sorting a List Into Buckets</h2>

  <p>In our <code class="language-plaintext highlighter-rouge">data</code> folder, large data sets are stored in files whose names start with
“inflammation-“ and small data sets – in files whose names start with “small-“. We
also have some other files that we do not care about at this point. We’d like to break all
these files into three lists called <code class="language-plaintext highlighter-rouge">large_files</code>, <code class="language-plaintext highlighter-rouge">small_files</code>, and <code class="language-plaintext highlighter-rouge">other_files</code>,
respectively.</p>

  <p>Add code to the template below to do this. Note that the string method
<a href="https://docs.python.org/3/library/stdtypes.html#str.startswith"><code class="language-plaintext highlighter-rouge">startswith</code></a>
returns <code class="language-plaintext highlighter-rouge">True</code> if and only if the string it is called on starts with the string
passed as an argument, that is:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">'String'</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'Str'</span><span class="p">)</span>
</code></pre></div>  </div>
  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>True
</code></pre></div>  </div>
  <p>But</p>
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">'String'</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'str'</span><span class="p">)</span>
</code></pre></div>  </div>
  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>False
</code></pre></div>  </div>
  <p>Use the following Python code as your starting point:</p>
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filenames</span> <span class="o">=</span> <span class="p">[</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span>
         <span class="s">'myscript.py'</span><span class="p">,</span>
         <span class="s">'inflammation-02.csv'</span><span class="p">,</span>
         <span class="s">'small-01.csv'</span><span class="p">,</span>
         <span class="s">'small-02.csv'</span><span class="p">]</span>
<span class="n">large_files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">small_files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">other_files</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>  </div>

  <p>Your solution should:</p>

  <ol>
    <li>loop over the names of the files</li>
    <li>figure out which group each filename belongs in</li>
    <li>append the filename to that list</li>
  </ol>

  <p>In the end the three lists should be:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">large_files</span> <span class="o">=</span> <span class="p">[</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="s">'inflammation-02.csv'</span><span class="p">]</span>
<span class="n">small_files</span> <span class="o">=</span> <span class="p">[</span><span class="s">'small-01.csv'</span><span class="p">,</span> <span class="s">'small-02.csv'</span><span class="p">]</span>
<span class="n">other_files</span> <span class="o">=</span> <span class="p">[</span><span class="s">'myscript.py'</span><span class="p">]</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'inflammation-'</span><span class="p">):</span>
        <span class="n">large_files</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">filename</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'small-'</span><span class="p">):</span>
        <span class="n">small_files</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">other_files</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'large_files:'</span><span class="p">,</span> <span class="n">large_files</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'small_files:'</span><span class="p">,</span> <span class="n">small_files</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'other_files:'</span><span class="p">,</span> <span class="n">other_files</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="counting-vowels">Counting Vowels</h2>

  <ol>
    <li>Write a loop that counts the number of vowels in a character string.</li>
    <li>Test it on a few individual words and full sentences.</li>
    <li>Once you are done, compare your solution to your neighbor’s.
Did you make the same decisions about how to handle the letter ‘y’
(which some people think is a vowel, and some do not)?</li>
  </ol>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">vowels</span> <span class="o">=</span> <span class="s">'aeiouAEIOU'</span>
<span class="n">sentence</span> <span class="o">=</span> <span class="s">'Mary had a little lamb.'</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">sentence</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">print</span><span class="p">(</span><span class="s">'The number of vowels in this string is '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">if condition</code> to start a conditional statement, <code class="language-plaintext highlighter-rouge">elif condition</code> to provide additional tests, and <code class="language-plaintext highlighter-rouge">else</code> to provide a default.</p>
</li>
    
    <li><p>The bodies of the branches of conditional statements must be indented.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">==</code> to test for equality.</p>
</li>
    
    <li><p><code class="language-plaintext highlighter-rouge">X and Y</code> is only true if both <code class="language-plaintext highlighter-rouge">X</code> and <code class="language-plaintext highlighter-rouge">Y</code> are true.</p>
</li>
    
    <li><p><code class="language-plaintext highlighter-rouge">X or Y</code> is true if either <code class="language-plaintext highlighter-rouge">X</code> or <code class="language-plaintext highlighter-rouge">Y</code>, or both, are true.</p>
</li>
    
    <li><p>Zero, the empty string, and the empty list are considered false; all other numbers, strings, and lists are considered true.</p>
</li>
    
    <li><p><code class="language-plaintext highlighter-rouge">True</code> and <code class="language-plaintext highlighter-rouge">False</code> represent truth values.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="creating-functions" class="maintitle">Creating Functions</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I define new functions?</p>
</li>
	
	<li><p>What’s the difference between defining and calling a function?</p>
</li>
	
	<li><p>What happens when I call a function?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Define a function that takes parameters.</p>
</li>
	
	<li><p>Return a value from a function.</p>
</li>
	
	<li><p>Test and debug a function.</p>
</li>
	
	<li><p>Set default values for function parameters.</p>
</li>
	
	<li><p>Explain why we should divide programs into small, single-purpose functions.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>At this point,
we’ve written code to draw some interesting features in our inflammation data,
loop over all our data files to quickly draw these plots for each of them,
and have Python make decisions based on what it sees in our data.
But, our code is getting pretty long and complicated;
what if we had thousands of datasets,
and didn’t want to generate a figure for every single one?
Commenting out the figure-drawing code is a nuisance.
Also, what if we want to use that code again,
on a different dataset or at a different point in our program?
Cutting and pasting it is going to make our code get very long and very repetitive,
very quickly.
We’d like a way to package our code so that it is easier to reuse,
and Python provides for this by letting us define things called ‘functions’ —
a shorthand way of re-executing longer pieces of code.
Let’s start by defining a function <code class="language-plaintext highlighter-rouge">fahr_to_celsius</code> that converts temperatures
from Fahrenheit to Celsius:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fahr_to_celsius</span><span class="p">(</span><span class="n">temp</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">temp</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">))</span>
</code></pre></div></div>

<p><img src="./aio_files/python-function.svg" alt="Labeled parts of a Python function definition"></p>

<p>The function definition opens with the keyword <code class="language-plaintext highlighter-rouge">def</code> followed by the
name of the function (<code class="language-plaintext highlighter-rouge">fahr_to_celsius</code>) and a parenthesized list of parameter names (<code class="language-plaintext highlighter-rouge">temp</code>). The
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#body">body</a> of the function — the
statements that are executed when it runs — is indented below the
definition line.  The body concludes with a <code class="language-plaintext highlighter-rouge">return</code> keyword followed by the return value.</p>

<p>When we call the function,
the values we pass to it are assigned to those variables
so that we can use them inside the function.
Inside the function,
we use a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#return-statement">return statement</a> to send a result
back to whoever asked for it.</p>

<p>Let’s try running our function.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fahr_to_celsius</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
</code></pre></div></div>

<p>This command should call our function, using “32” as the input and return the function value.</p>

<p>In fact, calling our own function is no different from calling any other function:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'freezing point of water:'</span><span class="p">,</span> <span class="n">fahr_to_celsius</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span> <span class="s">'C'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'boiling point of water:'</span><span class="p">,</span> <span class="n">fahr_to_celsius</span><span class="p">(</span><span class="mi">212</span><span class="p">),</span> <span class="s">'C'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>freezing point of water: 0.0 C
boiling point of water: 100.0 C
</code></pre></div></div>

<p>We’ve successfully called the function that we defined,
and we have access to the value that we returned.</p>

<h2 id="composing-functions">Composing Functions</h2>

<p>Now that we’ve seen how to turn Fahrenheit into Celsius,
we can also write the function to turn Celsius into Kelvin:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">celsius_to_kelvin</span><span class="p">(</span><span class="n">temp_c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">temp_c</span> <span class="o">+</span> <span class="mf">273.15</span>

<span class="k">print</span><span class="p">(</span><span class="s">'freezing point of water in Kelvin:'</span><span class="p">,</span> <span class="n">celsius_to_kelvin</span><span class="p">(</span><span class="mf">0.</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>freezing point of water in Kelvin: 273.15
</code></pre></div></div>

<p>What about converting Fahrenheit to Kelvin?
We could write out the formula,
but we don’t need to.
Instead,
we can <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#compose">compose</a> the two functions we have already created:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fahr_to_kelvin</span><span class="p">(</span><span class="n">temp_f</span><span class="p">):</span>
    <span class="n">temp_c</span> <span class="o">=</span> <span class="n">fahr_to_celsius</span><span class="p">(</span><span class="n">temp_f</span><span class="p">)</span>
    <span class="n">temp_k</span> <span class="o">=</span> <span class="n">celsius_to_kelvin</span><span class="p">(</span><span class="n">temp_c</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">temp_k</span>

<span class="k">print</span><span class="p">(</span><span class="s">'boiling point of water in Kelvin:'</span><span class="p">,</span> <span class="n">fahr_to_kelvin</span><span class="p">(</span><span class="mf">212.0</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>boiling point of water in Kelvin: 373.15
</code></pre></div></div>

<p>This is our first taste of how larger programs are built:
we define basic operations,
then combine them in ever-larger chunks to get the effect we want.
Real-life functions will usually be larger than the ones shown here — typically half a dozen
to a few dozen lines — but they shouldn’t ever be much longer than that,
or the next person who reads it won’t be able to understand what’s going on.</p>

<h2 id="tidying-up">Tidying up</h2>

<p>Now that we know how to wrap bits of code up in functions,
we can make our inflammation analysis easier to read and easier to reuse.
First, let’s make a <code class="language-plaintext highlighter-rouge">visualize</code> function that generates our plots:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">visualize</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>

    <span class="n">axes1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">axes2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">axes3</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">axes1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'average'</span><span class="p">)</span>
    <span class="n">axes1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">axes2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'max'</span><span class="p">)</span>
    <span class="n">axes2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">axes3</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'min'</span><span class="p">)</span>
    <span class="n">axes3</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>and another function called <code class="language-plaintext highlighter-rouge">detect_problems</code> that checks for those systematics
we noticed:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">detect_problems</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">20</span><span class="p">]</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Suspicious looking maxima!'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Minima add up to zero!'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Seems OK!'</span><span class="p">)</span>
</code></pre></div></div>

<p>Wait! Didn’t we forget to specify what both of these functions should return? Well, we didn’t.
In Python, functions are not required to include a <code class="language-plaintext highlighter-rouge">return</code> statement and can be used for
the sole purpose of grouping together pieces of code that conceptually do one thing. In such cases,
function names usually describe what they do, <em>e.g.</em> <code class="language-plaintext highlighter-rouge">visualize</code>, <code class="language-plaintext highlighter-rouge">detect_problems</code>.</p>

<p>Notice that rather than jumbling this code together in one giant <code class="language-plaintext highlighter-rouge">for</code> loop,
we can now read and reuse both ideas separately.
We can reproduce the previous analysis with a much simpler <code class="language-plaintext highlighter-rouge">for</code> loop:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filenames</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'inflammation*.csv'</span><span class="p">))</span>

<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">[:</span><span class="mi">3</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">visualize</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">detect_problems</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></div>

<p>By giving our functions human-readable names,
we can more easily read and understand what is happening in the <code class="language-plaintext highlighter-rouge">for</code> loop.
Even better, if at some later date we want to use either of those pieces of code again,
we can do so in a single line.</p>

<h2 id="testing-and-documenting">Testing and Documenting</h2>

<p>Once we start putting things in functions so that we can re-use them,
we need to start testing that those functions are working correctly.
To see how to do this,
let’s write a function to offset a dataset so that it’s mean value
shifts to a user-defined value:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target_mean_value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="o">+</span> <span class="n">target_mean_value</span>
</code></pre></div></div>

<p>We could test this on our actual data,
but since we don’t know what the values ought to be,
it will be hard to tell if the result was correct.
Instead,
let’s use NumPy to create a matrix of 0’s
and then offset its values to have a mean value of 3:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">z</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">offset_mean</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[ 3.  3.]
 [ 3.  3.]]
</code></pre></div></div>

<p>That looks right,
so let’s try <code class="language-plaintext highlighter-rouge">offset_mean</code> on our real data:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[-6.14875 -6.14875 -5.14875 ... -3.14875 -6.14875 -6.14875]
 [-6.14875 -5.14875 -4.14875 ... -5.14875 -6.14875 -5.14875]
 [-6.14875 -5.14875 -5.14875 ... -4.14875 -5.14875 -5.14875]
 ...
 [-6.14875 -5.14875 -5.14875 ... -5.14875 -5.14875 -5.14875]
 [-6.14875 -6.14875 -6.14875 ... -6.14875 -4.14875 -6.14875]
 [-6.14875 -6.14875 -5.14875 ... -5.14875 -5.14875 -6.14875]]
</code></pre></div></div>

<p>It’s hard to tell from the default output whether the result is correct,
but there are a few tests that we can run to reassure us:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'original min, mean, and max are:'</span><span class="p">,</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">offset_data</span> <span class="o">=</span> <span class="n">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'min, mean, and max of offset data are:'</span><span class="p">,</span>
      <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">offset_data</span><span class="p">),</span>
      <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">offset_data</span><span class="p">),</span>
      <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">offset_data</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>original min, mean, and max are: 0.0 6.14875 20.0
min, mean, and and max of offset data are: -6.14875 2.84217094304e-16 13.85125
</code></pre></div></div>

<p>That seems almost right:
the original mean was about 6.1,
so the lower bound from zero is now about -6.1.
The mean of the offset data isn’t quite zero — we’ll explore why not in the challenges — but
it’s pretty close.
We can even go further and check that the standard deviation hasn’t changed:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'std dev before and after:'</span><span class="p">,</span> <span class="n">numpy</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">numpy</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">offset_data</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>std dev before and after: 4.61383319712 4.61383319712
</code></pre></div></div>

<p>Those values look the same,
but we probably wouldn’t notice if they were different in the sixth decimal place.
Let’s do this instead:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'difference in standard deviations before and after:'</span><span class="p">,</span>
      <span class="n">numpy</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">std</span><span class="p">(</span><span class="n">offset_data</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>difference in standard deviations before and after: -3.5527136788e-15
</code></pre></div></div>

<p>Again,
the difference is very small.
It’s still possible that our function is wrong,
but it seems unlikely enough that we should probably get back to doing our analysis.
We have one more task first, though:
we should write some <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#documentation">documentation</a> for our function
to remind ourselves later what it’s for and how to use it.</p>

<p>The usual way to put documentation in software is
to add <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#comment">comments</a> like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># offset_mean(data, target_mean_value):
# return a new array containing the original data with its mean offset to match the desired value.
</span><span class="k">def</span> <span class="nf">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target_mean_value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="o">+</span> <span class="n">target_mean_value</span>
</code></pre></div></div>

<p>There’s a better way, though.
If the first thing in a function is a string that isn’t assigned to a variable,
that string is attached to the function as its documentation:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target_mean_value</span><span class="p">):</span>
    <span class="s">"""Return a new array containing the original data
       with its mean offset to match the desired value."""</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="o">+</span> <span class="n">target_mean_value</span>
</code></pre></div></div>

<p>This is better because we can now ask Python’s built-in help system to show us
the documentation for the function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">help</span><span class="p">(</span><span class="n">offset_mean</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Help on function offset_mean in module __main__:

offset_mean(data, target_mean_value)
    Return a new array containing the original data with its mean offset to match the desired value.
</code></pre></div></div>

<p>A string like this is called a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#docstring">docstring</a>.
We don’t need to use triple quotes when we write one,
but if we do,
we can break the string across multiple lines:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target_mean_value</span><span class="p">):</span>
    <span class="s">"""Return a new array containing the original data
       with its mean offset to match the desired value.

    Examples
    --------
    &gt;&gt;&gt; offset_mean([1, 2, 3], 0)
    array([-1.,  0.,  1.])
    """</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="o">+</span> <span class="n">target_mean_value</span>

<span class="n">help</span><span class="p">(</span><span class="n">offset_mean</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Help on function offset_mean in module __main__:

offset_mean(data, target_mean_value)
    Return a new array containing the original data
       with its mean offset to match the desired value.

    Examples
    --------
    &gt;&gt;&gt; offset_mean([1, 2, 3], 0)
    array([-1.,  0.,  1.])
</code></pre></div></div>

<h2 id="defining-defaults">Defining Defaults</h2>

<p>We have passed parameters to functions in two ways:
directly, as in <code class="language-plaintext highlighter-rouge">type(data)</code>,
and by name, as in <code class="language-plaintext highlighter-rouge">numpy.loadtxt(fname='something.csv', delimiter=',')</code>.
In fact,
we can pass the filename to <code class="language-plaintext highlighter-rouge">loadtxt</code> without the <code class="language-plaintext highlighter-rouge">fname=</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[ 0.,  0.,  1., ...,  3.,  0.,  0.],
       [ 0.,  1.,  2., ...,  1.,  0.,  1.],
       [ 0.,  1.,  1., ...,  2.,  1.,  1.],
       ...,
       [ 0.,  1.,  1., ...,  1.,  1.,  1.],
       [ 0.,  0.,  0., ...,  0.,  2.,  0.],
       [ 0.,  0.,  1., ...,  1.,  1.,  0.]])
</code></pre></div></div>

<p>but we still need to say <code class="language-plaintext highlighter-rouge">delimiter=</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="s">','</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/Users/username/anaconda3/lib/python3.6/site-packages/numpy/lib/npyio.py", line 1041, in loa
dtxt
    dtype = np.dtype(dtype)
  File "/Users/username/anaconda3/lib/python3.6/site-packages/numpy/core/_internal.py", line 199, in
_commastring
    newitem = (dtype, eval(repeats))
  File "&lt;string&gt;", line 1
    ,
    ^
SyntaxError: unexpected EOF while parsing
</code></pre></div></div>

<p>To understand what’s going on,
and make our own functions easier to use,
let’s re-define our <code class="language-plaintext highlighter-rouge">offset_mean</code> function like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">offset_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target_mean_value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="s">"""Return a new array containing the original data
       with its mean offset to match the desired value, (0 by default).

    Examples
    --------
    &gt;&gt;&gt; offset_mean([1, 2, 3])
    array([-1.,  0.,  1.])
    """</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="o">+</span> <span class="n">target_mean_value</span>
</code></pre></div></div>

<p>The key change is that the second parameter is now written <code class="language-plaintext highlighter-rouge">target_mean_value=0.0</code>
instead of just <code class="language-plaintext highlighter-rouge">target_mean_value</code>.
If we call the function with two arguments,
it works as it did before:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">test_data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">offset_mean</span><span class="p">(</span><span class="n">test_data</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[ 3.  3.]
 [ 3.  3.]]
</code></pre></div></div>

<p>But we can also now call it with just one parameter,
in which case <code class="language-plaintext highlighter-rouge">target_mean_value</code> is automatically assigned
the <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#default-value">default value</a> of 0.0:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">more_data</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">numpy</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'data before mean offset:'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">more_data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'offset data:'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">offset_mean</span><span class="p">(</span><span class="n">more_data</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data before mean offset:
[[ 5.  5.]
 [ 5.  5.]]
offset data:
[[ 0.  0.]
 [ 0.  0.]]
</code></pre></div></div>

<p>This is handy:
if we usually want a function to work one way,
but occasionally need it to do something else,
we can allow people to pass a parameter when they need to
but provide a default to make the normal case easier.
The example below shows how Python matches values to parameters:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'a:'</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s">'b:'</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">'c:'</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'no parameters:'</span><span class="p">)</span>
<span class="n">display</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'one parameter:'</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="mi">55</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'two parameters:'</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">66</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>no parameters:
a: 1 b: 2 c: 3
one parameter:
a: 55 b: 2 c: 3
two parameters:
a: 55 b: 66 c: 3
</code></pre></div></div>

<p>As this example shows,
parameters are matched up from left to right,
and any that haven’t been given a value explicitly get their default value.
We can override this behavior by naming the value as we pass it in:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'only setting the value of c'</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">77</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>only setting the value of c
a: 1 b: 2 c: 77
</code></pre></div></div>

<p>With that in hand,
let’s look at the help for <code class="language-plaintext highlighter-rouge">numpy.loadtxt</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">help</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Help on function loadtxt in module numpy.lib.npyio:

loadtxt(fname, dtype=&lt;class 'float'&gt;, comments='#', delimiter=None, converters=None, skiprows=0, use
cols=None, unpack=False, ndmin=0, encoding='bytes')
    Load data from a text file.

    Each row in the text file must have the same number of values.

    Parameters
    ----------
...
</code></pre></div></div>

<p>There’s a lot of information here,
but the most important part is the first couple of lines:</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>loadtxt(fname, dtype=&lt;class 'float'&gt;, comments='#', delimiter=None, converters=None, skiprows=0, use
cols=None, unpack=False, ndmin=0, encoding='bytes')
</code></pre></div></div>

<p>This tells us that <code class="language-plaintext highlighter-rouge">loadtxt</code> has one parameter called <code class="language-plaintext highlighter-rouge">fname</code> that doesn’t have a default value,
and eight others that do.
If we call the function like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s">'inflammation-01.csv'</span><span class="p">,</span> <span class="s">','</span><span class="p">)</span>
</code></pre></div></div>

<p>then the filename is assigned to <code class="language-plaintext highlighter-rouge">fname</code> (which is what we want),
but the delimiter string <code class="language-plaintext highlighter-rouge">','</code> is assigned to <code class="language-plaintext highlighter-rouge">dtype</code> rather than <code class="language-plaintext highlighter-rouge">delimiter</code>,
because <code class="language-plaintext highlighter-rouge">dtype</code> is the second parameter in the list. However <code class="language-plaintext highlighter-rouge">','</code> isn’t a known <code class="language-plaintext highlighter-rouge">dtype</code> so
our code produced an error message when we tried to run it.
When we call <code class="language-plaintext highlighter-rouge">loadtxt</code> we don’t have to provide <code class="language-plaintext highlighter-rouge">fname=</code> for the filename because it’s the
first item in the list, but if we want the <code class="language-plaintext highlighter-rouge">','</code> to be assigned to the variable <code class="language-plaintext highlighter-rouge">delimiter</code>,
we <em>do</em> have to provide <code class="language-plaintext highlighter-rouge">delimiter=</code> for the second parameter since <code class="language-plaintext highlighter-rouge">delimiter</code> is not
the second parameter in the list.</p>

<h2 id="readable-functions">Readable functions</h2>

<p>Consider these two functions:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">s</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">+=</span> <span class="n">v</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">+=</span> <span class="p">(</span><span class="n">v</span> <span class="o">-</span> <span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">-</span> <span class="n">m</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">numpy</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">std_dev</span><span class="p">(</span><span class="n">sample</span><span class="p">):</span>
    <span class="n">sample_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">sample</span><span class="p">:</span>
        <span class="n">sample_sum</span> <span class="o">+=</span> <span class="n">value</span>

    <span class="n">sample_mean</span> <span class="o">=</span> <span class="n">sample_sum</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

    <span class="n">sum_squared_devs</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">sample</span><span class="p">:</span>
        <span class="n">sum_squared_devs</span> <span class="o">+=</span> <span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">sample_mean</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">sample_mean</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">numpy</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">sum_squared_devs</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
</code></pre></div></div>

<p>The functions <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">std_dev</code> are computationally equivalent (they
both calculate the sample standard deviation), but to a human reader,
they look very different. You probably found <code class="language-plaintext highlighter-rouge">std_dev</code> much easier to
read and understand than <code class="language-plaintext highlighter-rouge">s</code>.</p>

<p>As this example illustrates, both documentation and a programmer’s
<em>coding style</em> combine to determine how easy it is for others to read
and understand the programmer’s code. Choosing meaningful variable
names and using blank spaces to break the code into logical “chunks”
are helpful techniques for producing <em>readable code</em>. This is useful
not only for sharing code with others, but also for the original
programmer. If you need to revisit code that you wrote months ago and
haven’t thought about since then, you will appreciate the value of
readable code!</p>

<blockquote class="challenge">
  <h2 id="combining-strings">Combining Strings</h2>

  <p>“Adding” two strings produces their concatenation:
<code class="language-plaintext highlighter-rouge">'a' + 'b'</code> is <code class="language-plaintext highlighter-rouge">'ab'</code>.
Write a function called <code class="language-plaintext highlighter-rouge">fence</code> that takes two parameters called <code class="language-plaintext highlighter-rouge">original</code> and <code class="language-plaintext highlighter-rouge">wrapper</code>
and returns a new string that has the wrapper character at the beginning and end of the original.
A call to your function should look like this:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">fence</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'*'</span><span class="p">))</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*name*
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fence</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">wrapper</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">wrapper</span> <span class="o">+</span> <span class="n">original</span> <span class="o">+</span> <span class="n">wrapper</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="return-versus-print">Return versus print</h2>

  <p>Note that <code class="language-plaintext highlighter-rouge">return</code> and <code class="language-plaintext highlighter-rouge">print</code> are not interchangeable.
<code class="language-plaintext highlighter-rouge">print</code> is a Python function that <em>prints</em> data to the screen.
It enables us, <em>users</em>, see the data.
<code class="language-plaintext highlighter-rouge">return</code> statement, on the other hand, makes data visible to the program.
Let’s have a look at the following function:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div>  </div>

  <p><strong>Question</strong>: What will we see if we execute the following commands?</p>
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Python will first execute the function <code class="language-plaintext highlighter-rouge">add</code> with <code class="language-plaintext highlighter-rouge">a = 7</code> and <code class="language-plaintext highlighter-rouge">b = 3</code>,
and, therefore, print <code class="language-plaintext highlighter-rouge">10</code>. However, because function <code class="language-plaintext highlighter-rouge">add</code> does not have a
line that starts with <code class="language-plaintext highlighter-rouge">return</code> (no <code class="language-plaintext highlighter-rouge">return</code> “statement”), it will, by default, return
nothing which, in Python world, is called <code class="language-plaintext highlighter-rouge">None</code>. Therefore, <code class="language-plaintext highlighter-rouge">A</code> will be assigned to <code class="language-plaintext highlighter-rouge">None</code>
and the last line (<code class="language-plaintext highlighter-rouge">print(A)</code>) will print <code class="language-plaintext highlighter-rouge">None</code>. As a result, we will see:</p>
    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>10
None
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="selecting-characters-from-strings">Selecting Characters From Strings</h2>

  <p>If the variable <code class="language-plaintext highlighter-rouge">s</code> refers to a string,
then <code class="language-plaintext highlighter-rouge">s[0]</code> is the string’s first character
and <code class="language-plaintext highlighter-rouge">s[-1]</code> is its last.
Write a function called <code class="language-plaintext highlighter-rouge">outer</code>
that returns a string made up of just the first and last characters of its input.
A call to your function should look like this:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">outer</span><span class="p">(</span><span class="s">'helium'</span><span class="p">))</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hm
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">outer</span><span class="p">(</span><span class="n">input_string</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">input_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">input_string</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="rescaling-an-array">Rescaling an Array</h2>

  <p>Write a function <code class="language-plaintext highlighter-rouge">rescale</code> that takes an array as input
and returns a corresponding array of values scaled to lie in the range 0.0 to 1.0.
(Hint: If <code class="language-plaintext highlighter-rouge">L</code> and <code class="language-plaintext highlighter-rouge">H</code> are the lowest and highest values in the original array,
then the replacement for a value <code class="language-plaintext highlighter-rouge">v</code> should be <code class="language-plaintext highlighter-rouge">(v-L) / (H-L)</code>.)</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">rescale</span><span class="p">(</span><span class="n">input_array</span><span class="p">):</span>
    <span class="n">L</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">input_array</span><span class="p">)</span>
    <span class="n">H</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">input_array</span><span class="p">)</span>
    <span class="n">output_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">input_array</span> <span class="o">-</span> <span class="n">L</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">H</span> <span class="o">-</span> <span class="n">L</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output_array</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="testing-and-documenting-your-function">Testing and Documenting Your Function</h2>

  <p>Run the commands <code class="language-plaintext highlighter-rouge">help(numpy.arange)</code> and <code class="language-plaintext highlighter-rouge">help(numpy.linspace)</code>
to see how to use these functions to generate regularly-spaced values,
then use those values to test your <code class="language-plaintext highlighter-rouge">rescale</code> function.
Once you’ve successfully tested your function,
add a docstring that explains what it does.</p>

  <blockquote class="solution">
    <h2 id="solution-4">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="s">"""Takes an array as input, and returns a corresponding array scaled so
that 0 corresponds to the minimum and 1 to the maximum value of the input array.

Examples:
&gt;&gt;&gt; rescale(numpy.arange(10.0))
array([ 0.        ,  0.11111111,  0.22222222,  0.33333333,  0.44444444,
       0.55555556,  0.66666667,  0.77777778,  0.88888889,  1.        ])
&gt;&gt;&gt; rescale(numpy.linspace(0, 100, 5))
array([ 0.  ,  0.25,  0.5 ,  0.75,  1.  ])
"""</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="defining-defaults-1">Defining Defaults</h2>

  <p>Rewrite the <code class="language-plaintext highlighter-rouge">rescale</code> function so that it scales data to lie between <code class="language-plaintext highlighter-rouge">0.0</code> and <code class="language-plaintext highlighter-rouge">1.0</code> by default,
but will allow the caller to specify lower and upper bounds if they want.
Compare your implementation to your neighbor’s:
do the two functions always behave the same way?</p>

  <blockquote class="solution">
    <h2 id="solution-5">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">rescale</span><span class="p">(</span><span class="n">input_array</span><span class="p">,</span> <span class="n">low_val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high_val</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="s">"""rescales input array values to lie between low_val and high_val"""</span>
    <span class="n">L</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">input_array</span><span class="p">)</span>
    <span class="n">H</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">input_array</span><span class="p">)</span>
    <span class="n">intermed_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">input_array</span> <span class="o">-</span> <span class="n">L</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">H</span> <span class="o">-</span> <span class="n">L</span><span class="p">)</span>
    <span class="n">output_array</span> <span class="o">=</span> <span class="n">intermed_array</span> <span class="o">*</span> <span class="p">(</span><span class="n">high_val</span> <span class="o">-</span> <span class="n">low_val</span><span class="p">)</span> <span class="o">+</span> <span class="n">low_val</span>
    <span class="k">return</span> <span class="n">output_array</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="variables-inside-and-outside-functions">Variables Inside and Outside Functions</h2>

  <p>What does the following piece of code display when run — and why?</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">f2k</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">k</span> <span class="o">=</span> <span class="p">((</span><span class="n">f</span><span class="o">-</span><span class="mi">32</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">5.0</span><span class="o">/</span><span class="mf">9.0</span><span class="p">))</span> <span class="o">+</span> <span class="mf">273.15</span>
    <span class="k">return</span> <span class="n">k</span>

<span class="n">f2k</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">f2k</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
<span class="n">f2k</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-6">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>

    <div class="language-plaintext output highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code>259.81666666666666
287.15
273.15
0
</code></pre></div>    </div>
    <p style="display: none;"><code class="language-plaintext highlighter-rouge">k</code> is 0 because the <code class="language-plaintext highlighter-rouge">k</code> inside the function <code class="language-plaintext highlighter-rouge">f2k</code> doesn’t know
about the <code class="language-plaintext highlighter-rouge">k</code> defined outside the function.</p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="mixing-default-and-non-default-parameters">Mixing Default and Non-Default Parameters</h2>

  <p>Given the following code:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">numbers</span><span class="p">(</span><span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="p">,</span> <span class="n">four</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">one</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">two</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">three</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">four</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span>

<span class="k">print</span><span class="p">(</span><span class="n">numbers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
</code></pre></div>  </div>

  <p>what do you expect will be printed?  What is actually printed?
What rule do you think Python is following?</p>

  <ol>
    <li><code class="language-plaintext highlighter-rouge">1234</code></li>
    <li><code class="language-plaintext highlighter-rouge">one2three4</code></li>
    <li><code class="language-plaintext highlighter-rouge">1239</code></li>
    <li><code class="language-plaintext highlighter-rouge">SyntaxError</code></li>
  </ol>

  <p>Given that, what does the following piece of code display when run?</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">6</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'a: '</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s">'b: '</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">'c:'</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="n">func</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>  </div>

  <ol>
    <li><code class="language-plaintext highlighter-rouge">a: b: 3 c: 6</code></li>
    <li><code class="language-plaintext highlighter-rouge">a: -1 b: 3 c: 6</code></li>
    <li><code class="language-plaintext highlighter-rouge">a: -1 b: 2 c: 6</code></li>
    <li><code class="language-plaintext highlighter-rouge">a: b: -1 c: 2</code></li>
  </ol>

  <blockquote class="solution">
    <h2 id="solution-7">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">Attempting to define the <code class="language-plaintext highlighter-rouge">numbers</code> function results in <code class="language-plaintext highlighter-rouge">4. SyntaxError</code>.
The defined parameters <code class="language-plaintext highlighter-rouge">two</code> and <code class="language-plaintext highlighter-rouge">four</code> are given default values. Because
<code class="language-plaintext highlighter-rouge">one</code> and <code class="language-plaintext highlighter-rouge">three</code> are not given default values, they are required to be
included as arguments when the function is called and must be placed
before any parameters that have default values in the function definition.</p>

    <p style="display: none;">The given call to <code class="language-plaintext highlighter-rouge">func</code> displays <code class="language-plaintext highlighter-rouge">a: -1 b: 2 c: 6</code>. -1 is assigned to
the first parameter <code class="language-plaintext highlighter-rouge">a</code>, 2 is assigned to the next parameter <code class="language-plaintext highlighter-rouge">b</code>, and <code class="language-plaintext highlighter-rouge">c</code> is
not passed a value, so it uses its default value 6.</p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="the-old-switcheroo">The Old Switcheroo</h2>

  <p>Consider this code:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">temp</span>

<span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>Which of the following would be printed if you were to run this code?
Why did you pick this answer?</p>

  <ol>
    <li><code class="language-plaintext highlighter-rouge">7 3</code></li>
    <li><code class="language-plaintext highlighter-rouge">3 7</code></li>
    <li><code class="language-plaintext highlighter-rouge">3 3</code></li>
    <li><code class="language-plaintext highlighter-rouge">7 7</code></li>
  </ol>

  <blockquote class="solution">
    <h2 id="solution-8">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;"><code class="language-plaintext highlighter-rouge">3 7</code> is the correct answer. Initially, <code class="language-plaintext highlighter-rouge">a</code> has a value of 3 and <code class="language-plaintext highlighter-rouge">b</code> has a value of 7.
When the <code class="language-plaintext highlighter-rouge">swap</code> function is called, it creates local variables (also called
<code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> in this case) and trades their values. The function does not
return any values and does not alter <code class="language-plaintext highlighter-rouge">a</code> or <code class="language-plaintext highlighter-rouge">b</code> outside of its local copy.
Therefore the original values of <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> remain unchanged.</p>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="readable-code">Readable Code</h2>

  <p>Revise a function you wrote for one of the previous exercises to try to make
the code more readable. Then, collaborate with one of your neighbors
to critique each other’s functions and discuss how your function implementations
could be further improved to make them more readable.</p>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Define a function using <code class="language-plaintext highlighter-rouge">def function_name(parameter)</code>.</p>
</li>
    
    <li><p>The body of a function must be indented.</p>
</li>
    
    <li><p>Call a function using <code class="language-plaintext highlighter-rouge">function_name(value)</code>.</p>
</li>
    
    <li><p>Numbers are stored as integers or floating-point numbers.</p>
</li>
    
    <li><p>Variables defined within a function can only be seen and used within the body of the function.</p>
</li>
    
    <li><p>If a variable is not defined within the function it is used, Python looks for a definition before the function call</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">help(thing)</code> to view help for something.</p>
</li>
    
    <li><p>Put docstrings in functions to provide help for that function.</p>
</li>
    
    <li><p>Specify default values for parameters when defining a function using <code class="language-plaintext highlighter-rouge">name=value</code> in the parameter list.</p>
</li>
    
    <li><p>Parameters can be passed by matching based on name, by position, or by omitting them (in which case the default value is used).</p>
</li>
    
    <li><p>Put code whose parameters change frequently in a function, then call it with different parameter values to customize its behavior.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="errors-and-exceptions" class="maintitle">Errors and Exceptions</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How does Python report errors?</p>
</li>
	
	<li><p>How can I handle errors in Python programs?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>To be able to read a traceback, and determine where the error took place and what type it is.</p>
</li>
	
	<li><p>To be able to describe the types of situations in which syntax errors, indentation errors, name errors, index errors, and missing file errors occur.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>Every programmer encounters errors,
both those who are just beginning,
and those who have been programming for years.
Encountering errors and exceptions can be very frustrating at times,
and can make coding feel like a hopeless endeavour.
However,
understanding what the different types of errors are
and when you are likely to encounter them can help a lot.
Once you know <em>why</em> you get certain types of errors,
they become much easier to fix.</p>

<p>Errors in Python have a very specific form,
called a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#traceback">traceback</a>.
Let’s examine one:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This code has an intentional error. You can type it directly or
# use it for reference to understand the error message below.
</span><span class="k">def</span> <span class="nf">favorite_ice_cream</span><span class="p">():</span>
    <span class="n">ice_creams</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">'chocolate'</span><span class="p">,</span>
        <span class="s">'vanilla'</span><span class="p">,</span>
        <span class="s">'strawberry'</span>
    <span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ice_creams</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

<span class="n">favorite_ice_cream</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-1-70bd89baa4df&gt; in &lt;module&gt;()
      6     print(ice_creams[3])
      7
----&gt; 8 favorite_ice_cream()

&lt;ipython-input-1-70bd89baa4df&gt; in favorite_ice_cream()
      4         'vanilla',                                                                    'strawberry'
      5     ]
----&gt; 6     print(ice_creams[3])
      7
      8 favorite_ice_cream()

IndexError: list index out of range
</code></pre></div></div>

<p>This particular traceback has two levels.
You can determine the number of levels by looking for the number of arrows on the left hand side.
In this case:</p>

<ol>
  <li>
    <p>The first shows code from the cell above,
with an arrow pointing to Line 8 (which is <code class="language-plaintext highlighter-rouge">favorite_ice_cream()</code>).</p>
  </li>
  <li>
    <p>The second shows some code in the function <code class="language-plaintext highlighter-rouge">favorite_ice_cream</code>,
with an arrow pointing to Line 6 (which is <code class="language-plaintext highlighter-rouge">print(ice_creams[3])</code>).</p>
  </li>
</ol>

<p>The last level is the actual place where the error occurred.
The other level(s) show what function the program executed to get to the next level down.
So, in this case, the program first performed a
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#function-call">function call</a> to the function <code class="language-plaintext highlighter-rouge">favorite_ice_cream</code>.
Inside this function,
the program encountered an error on Line 6, when it tried to run the code <code class="language-plaintext highlighter-rouge">print(ice_creams[3])</code>.</p>

<blockquote class="callout">
  <h2 id="long-tracebacks">Long Tracebacks</h2>

  <p>Sometimes, you might see a traceback that is very long
– sometimes they might even be 20 levels deep!
This can make it seem like something horrible happened,
but the length of the error message does not reflect severity, rather,
it indicates that your program called many functions before it encountered the error.
Most of the time, the actual place where the error occurred is at the bottom-most level,
so you can skip down the traceback to the bottom.</p>
</blockquote>

<p>So what error did the program actually encounter?
In the last line of the traceback,
Python helpfully tells us the category or type of error (in this case, it is an <code class="language-plaintext highlighter-rouge">IndexError</code>)
and a more detailed error message (in this case, it says “list index out of range”).</p>

<p>If you encounter an error and don’t know what it means,
it is still important to read the traceback closely.
That way,
if you fix the error,
but encounter a new one,
you can tell that the error changed.
Additionally,
sometimes knowing <em>where</em> the error occurred is enough to fix it,
even if you don’t entirely understand the message.</p>

<p>If you do encounter an error you don’t recognize,
try looking at the
<a href="http://docs.python.org/3/library/exceptions.html">official documentation on errors</a>.
However,
note that you may not always be able to find the error there,
as it is possible to create custom errors.
In that case,
hopefully the custom error message is informative enough to help you figure out what went wrong.</p>

<h2 id="syntax-errors">Syntax Errors</h2>

<p>When you forget a colon at the end of a line,
accidentally add one space too many when indenting under an <code class="language-plaintext highlighter-rouge">if</code> statement,
or forget a parenthesis,
you will encounter a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#syntax-error">syntax error</a>.
This means that Python couldn’t figure out how to read your program.
This is similar to forgetting punctuation in English:
for example,
this text is difficult to read there is no punctuation there is also no capitalization
why is this hard because you have to figure out where each sentence ends
you also have to figure out where each sentence begins
to some extent it might be ambiguous if there should be a sentence break or not</p>

<p>People can typically figure out what is meant by text with no punctuation,
but people are much smarter than computers.
If Python doesn’t know how to read the program,
it will give up and inform you with an error.
For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">some_function</span><span class="p">()</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s">'hello, world!'</span>
    <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">msg</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  File "&lt;ipython-input-3-6bb841ea1423&gt;", line 1
    def some_function()
                       ^
SyntaxError: invalid syntax
</code></pre></div></div>

<p>Here, Python tells us that there is a <code class="language-plaintext highlighter-rouge">SyntaxError</code> on line 1,
and even puts a little arrow in the place where there is an issue.
In this case the problem is that the function definition is missing a colon at the end.</p>

<p>Actually, the function above has <em>two</em> issues with syntax.
If we fix the problem with the colon,
we see that there is <em>also</em> an <code class="language-plaintext highlighter-rouge">IndentationError</code>,
which means that the lines in the function definition do not all have the same indentation:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s">'hello, world!'</span>
    <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">msg</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  File "&lt;ipython-input-4-ae290e7659cb&gt;", line 4
    return msg
    ^
IndentationError: unexpected indent
</code></pre></div></div>

<p>Both <code class="language-plaintext highlighter-rouge">SyntaxError</code> and <code class="language-plaintext highlighter-rouge">IndentationError</code> indicate a problem with the syntax of your program,
but an <code class="language-plaintext highlighter-rouge">IndentationError</code> is more specific:
it <em>always</em> means that there is a problem with how your code is indented.</p>

<blockquote class="callout">
  <h2 id="tabs-and-spaces">Tabs and Spaces</h2>

  <p>Some indentation errors are harder to spot than others.
In particular, mixing spaces and tabs can be difficult to spot
because they are both <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#whitespace">whitespace</a>.
In the example below, the first two lines in the body of the function
<code class="language-plaintext highlighter-rouge">some_function</code> are indented with tabs, while the third line — with spaces.
If you’re working in a Jupyter notebook, be sure to copy and paste this example
rather than trying to type it in manually because Jupyter automatically replaces
tabs with spaces.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
	<span class="n">msg</span> <span class="o">=</span> <span class="s">'hello, world!'</span>
	<span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span>
</code></pre></div>  </div>

  <p>Visually it is impossible to spot the error.
Fortunately, Python does not allow you to mix tabs and spaces.</p>

  <div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  File "&lt;ipython-input-5-653b36fbcd41&gt;", line 4
    return msg
              ^
TabError: inconsistent use of tabs and spaces in indentation
</code></pre></div>  </div>
</blockquote>

<h2 id="variable-name-errors">Variable Name Errors</h2>

<p>Another very common type of error is called a <code class="language-plaintext highlighter-rouge">NameError</code>,
and occurs when you try to use a variable that does not exist.
For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-7-9d7b17ad5387&gt; in &lt;module&gt;()
----&gt; 1 print(a)

NameError: name 'a' is not defined
</code></pre></div></div>

<p>Variable name errors come with some of the most informative error messages,
which are usually of the form “name ‘the_variable_name’ is not defined”.</p>

<p>Why does this error message occur?
That’s a harder question to answer,
because it depends on what your code is supposed to do.
However,
there are a few very common reasons why you might have an undefined variable.
The first is that you meant to use a
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#string">string</a>, but forgot to put quotes around it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">hello</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-8-9553ee03b645&gt; in &lt;module&gt;()
----&gt; 1 print(hello)

NameError: name 'hello' is not defined
</code></pre></div></div>

<p>The second reason is that you might be trying to use a variable that does not yet exist.
In the following example,
<code class="language-plaintext highlighter-rouge">count</code> should have been defined (e.g., with <code class="language-plaintext highlighter-rouge">count = 0</code>) before the for loop:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="n">number</span>
<span class="k">print</span><span class="p">(</span><span class="s">'The count is:'</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-9-dd6a12d7ca5c&gt; in &lt;module&gt;()
      1 for number in range(10):
----&gt; 2     count = count + number
      3 print('The count is:', count)

NameError: name 'count' is not defined
</code></pre></div></div>

<p>Finally, the third possibility is that you made a typo when you were writing your code.
Let’s say we fixed the error above by adding the line <code class="language-plaintext highlighter-rouge">Count = 0</code> before the for loop.
Frustratingly, this actually does not fix the error.
Remember that variables are <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#case-sensitive">case-sensitive</a>,
so the variable <code class="language-plaintext highlighter-rouge">count</code> is different from <code class="language-plaintext highlighter-rouge">Count</code>. We still get the same error,
because we still have not defined <code class="language-plaintext highlighter-rouge">count</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="n">number</span>
<span class="k">print</span><span class="p">(</span><span class="s">'The count is:'</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-10-d77d40059aea&gt; in &lt;module&gt;()
      1 Count = 0
      2 for number in range(10):
----&gt; 3     count = count + number
      4 print('The count is:', count)

NameError: name 'count' is not defined
</code></pre></div></div>

<h2 id="index-errors">Index Errors</h2>

<p>Next up are errors having to do with containers (like lists and strings) and the items within them.
If you try to access an item in a list or a string that does not exist,
then you will get an error.
This makes sense:
if you asked someone what day they would like to get coffee,
and they answered “caturday”,
you might be a bit annoyed.
Python gets similarly annoyed if you try to ask it for an item that doesn’t exist:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">letters</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Letter #1 is'</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Letter #2 is'</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Letter #3 is'</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Letter #4 is'</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Letter #1 is a
Letter #2 is b
Letter #3 is c
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-11-d817f55b7d6c&gt; in &lt;module&gt;()
      3 print('Letter #2 is', letters[1])
      4 print('Letter #3 is', letters[2])
----&gt; 5 print('Letter #4 is', letters[3])

IndexError: list index out of range
</code></pre></div></div>

<p>Here,
Python is telling us that there is an <code class="language-plaintext highlighter-rouge">IndexError</code> in our code,
meaning we tried to access a list index that did not exist.</p>

<h2 id="file-errors">File Errors</h2>

<p>The last type of error we’ll cover today
are those associated with reading and writing files: <code class="language-plaintext highlighter-rouge">FileNotFoundError</code>.
If you try to read a file that does not exist,
you will receive a <code class="language-plaintext highlighter-rouge">FileNotFoundError</code> telling you so.
If you attempt to write to a file that was opened read-only, Python 3
returns an <code class="language-plaintext highlighter-rouge">UnsupportedOperationError</code>.
More generally, problems with input and output manifest as
<code class="language-plaintext highlighter-rouge">IOError</code>s or <code class="language-plaintext highlighter-rouge">OSError</code>s, depending on the version of Python you use.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file_handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'myfile.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
&lt;ipython-input-14-f6e1ac4aee96&gt; in &lt;module&gt;()
----&gt; 1 file_handle = open('myfile.txt', 'r')

FileNotFoundError: [Errno 2] No such file or directory: 'myfile.txt'
</code></pre></div></div>

<p>One reason for receiving this error is that you specified an incorrect path to the file.
For example,
if I am currently in a folder called <code class="language-plaintext highlighter-rouge">myproject</code>,
and I have a file in <code class="language-plaintext highlighter-rouge">myproject/writing/myfile.txt</code>,
but I try to open <code class="language-plaintext highlighter-rouge">myfile.txt</code>,
this will fail.
The correct path would be <code class="language-plaintext highlighter-rouge">writing/myfile.txt</code>.
It is also possible that the file name or its path contains a typo.</p>

<p>A related issue can occur if you use the “read” flag instead of the “write” flag.
Python will not give you an error if you try to open a file for writing
when the file does not exist.
However,
if you meant to open a file for reading,
but accidentally opened it for writing,
and then try to read from it,
you will get an <code class="language-plaintext highlighter-rouge">UnsupportedOperation</code> error
telling you that the file was not opened for reading:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file_handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'myfile.txt'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
<span class="n">file_handle</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
UnsupportedOperation                      Traceback (most recent call last)
&lt;ipython-input-15-b846479bc61f&gt; in &lt;module&gt;()
      1 file_handle = open('myfile.txt', 'w')
----&gt; 2 file_handle.read()

UnsupportedOperation: not readable
</code></pre></div></div>

<p>These are the most common errors with files,
though many others exist.
If you get an error that you’ve never seen before,
searching the Internet for that error type
often reveals common reasons why you might get that error.</p>

<blockquote class="challenge">
  <h2 id="reading-error-messages">Reading Error Messages</h2>

  <p>Read the Python code and the resulting traceback below, and answer the following questions:</p>

  <ol>
    <li>How many levels does the traceback have?</li>
    <li>What is the function name where the error occurred?</li>
    <li>On which line number in this function did the error occur?</li>
    <li>What is the type of error?</li>
    <li>What is the error message?</li>
  </ol>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This code has an intentional error. Do not type it directly;
# use it for reference to understand the error message below.
</span><span class="k">def</span> <span class="nf">print_message</span><span class="p">(</span><span class="n">day</span><span class="p">):</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'monday'</span><span class="p">:</span> <span class="s">'Hello, world!'</span><span class="p">,</span>
        <span class="s">'tuesday'</span><span class="p">:</span> <span class="s">'Today is Tuesday!'</span><span class="p">,</span>
        <span class="s">'wednesday'</span><span class="p">:</span> <span class="s">'It is the middle of the week.'</span><span class="p">,</span>
        <span class="s">'thursday'</span><span class="p">:</span> <span class="s">'Today is Donnerstag in German!'</span><span class="p">,</span>
        <span class="s">'friday'</span><span class="p">:</span> <span class="s">'Last day of the week!'</span><span class="p">,</span>
        <span class="s">'saturday'</span><span class="p">:</span> <span class="s">'Hooray for the weekend!'</span><span class="p">,</span>
        <span class="s">'sunday'</span><span class="p">:</span> <span class="s">'Aw, the weekend is almost over.'</span>
    <span class="p">}</span>
    <span class="k">print</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">day</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">print_friday_message</span><span class="p">():</span>
    <span class="n">print_message</span><span class="p">(</span><span class="s">'Friday'</span><span class="p">)</span>

<span class="n">print_friday_message</span><span class="p">()</span>
</code></pre></div>  </div>

  <div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
&lt;ipython-input-1-4be1945adbe2&gt; in &lt;module&gt;()
     14     print_message('Friday')
     15
---&gt; 16 print_friday_message()

&lt;ipython-input-1-4be1945adbe2&gt; in print_friday_message()
     12
     13 def print_friday_message():
---&gt; 14     print_message('Friday')
     15
     16 print_friday_message()

&lt;ipython-input-1-4be1945adbe2&gt; in print_message(day)
      9         'sunday': 'Aw, the weekend is almost over.'
     10     }
---&gt; 11     print(messages[day])
     12
     13 def print_friday_message():

KeyError: 'Friday'
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <ol style="display: none;">
      <li>3 levels</li>
      <li><code class="language-plaintext highlighter-rouge">print_message</code></li>
      <li>11</li>
      <li><code class="language-plaintext highlighter-rouge">KeyError</code></li>
      <li>There isn’t really a message; you’re supposed to infer that <code class="language-plaintext highlighter-rouge">Friday</code> is not a key in <code class="language-plaintext highlighter-rouge">messages</code>.</li>
    </ol>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="identifying-syntax-errors">Identifying Syntax Errors</h2>

  <ol>
    <li>Read the code below, and (without running it) try to identify what the errors are.</li>
    <li>Run the code, and read the error message. Is it a <code class="language-plaintext highlighter-rouge">SyntaxError</code> or an <code class="language-plaintext highlighter-rouge">IndentationError</code>?</li>
    <li>Fix the error.</li>
    <li>Repeat steps 2 and 3, until you have fixed all the errors.</li>
  </ol>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">another_function</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'Syntax errors are annoying.'</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="s">'But at least Python tells us about them!'</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'So they are usually not too hard to fix.'</span><span class="p">)</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;"><code class="language-plaintext highlighter-rouge">SyntaxError</code> for missing <code class="language-plaintext highlighter-rouge">():</code> at end of first line,
<code class="language-plaintext highlighter-rouge">IndentationError</code> for mismatch between second and third lines.
A fixed version is:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">another_function</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Syntax errors are annoying.'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'But at least Python tells us about them!'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'So they are usually not too hard to fix.'</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="identifying-variable-name-errors">Identifying Variable Name Errors</h2>

  <ol>
    <li>Read the code below, and (without running it) try to identify what the errors are.</li>
    <li>Run the code, and read the error message.
What type of <code class="language-plaintext highlighter-rouge">NameError</code> do you think this is?
In other words, is it a string with no quotes,
a misspelled variable,
or a variable that should have been defined but was not?</li>
    <li>Fix the error.</li>
    <li>Repeat steps 2 and 3, until you have fixed all the errors.</li>
  </ol>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="c1"># use a if the number is a multiple of 3, otherwise use b
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">Number</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s">'b'</span>
<span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;">3 <code class="language-plaintext highlighter-rouge">NameError</code>s for <code class="language-plaintext highlighter-rouge">number</code> being misspelled, for <code class="language-plaintext highlighter-rouge">message</code> not defined,
and for <code class="language-plaintext highlighter-rouge">a</code> not being in quotes.</p>

    <p style="display: none;">Fixed version:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">message</span> <span class="o">=</span> <span class="s">''</span>
<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="c1"># use a if the number is a multiple of 3, otherwise use b
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">number</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s">'a'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s">'b'</span>
<span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="identifying-index-errors">Identifying Index Errors</h2>

  <ol>
    <li>Read the code below, and (without running it) try to identify what the errors are.</li>
    <li>Run the code, and read the error message. What type of error is it?</li>
    <li>Fix the error.</li>
  </ol>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">seasons</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Spring'</span><span class="p">,</span> <span class="s">'Summer'</span><span class="p">,</span> <span class="s">'Fall'</span><span class="p">,</span> <span class="s">'Winter'</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'My favorite season is '</span><span class="p">,</span> <span class="n">seasons</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <p style="display: none;"><code class="language-plaintext highlighter-rouge">IndexError</code>; the last entry is <code class="language-plaintext highlighter-rouge">seasons[3]</code>, so <code class="language-plaintext highlighter-rouge">seasons[4]</code> doesn’t make sense.
A fixed version is:</p>

    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="n">seasons</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Spring'</span><span class="p">,</span> <span class="s">'Summer'</span><span class="p">,</span> <span class="s">'Fall'</span><span class="p">,</span> <span class="s">'Winter'</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'My favorite season is '</span><span class="p">,</span> <span class="n">seasons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Tracebacks can look intimidating, but they give us a lot of useful information about what went wrong in our program, including where the error occurred and what type of error it was.</p>
</li>
    
    <li><p>An error having to do with the ‘grammar’ or syntax of the program is called a <code class="language-plaintext highlighter-rouge">SyntaxError</code>. If the issue has to do with how the code is indented, then it will be called an <code class="language-plaintext highlighter-rouge">IndentationError</code>.</p>
</li>
    
    <li><p>A <code class="language-plaintext highlighter-rouge">NameError</code> will occur when trying to use a variable that does not exist. Possible causes are that a variable definition is missing, a variable reference differs from its definition in spelling or capitalization, or the code contains a string that is missing quotes around it.</p>
</li>
    
    <li><p>Containers like lists and strings will generate errors if you try to access items in them that do not exist. This type of error is called an <code class="language-plaintext highlighter-rouge">IndexError</code>.</p>
</li>
    
    <li><p>Trying to read a file that does not exist will give you an <code class="language-plaintext highlighter-rouge">FileNotFoundError</code>. Trying to read a file that is open for writing, or writing to a file that is open for reading, will give you an <code class="language-plaintext highlighter-rouge">IOError</code>.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="defensive-programming" class="maintitle">Defensive Programming</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 10 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I make my programs more reliable?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Explain what an assertion is.</p>
</li>
	
	<li><p>Add assertions that check the program’s state is correct.</p>
</li>
	
	<li><p>Correctly add precondition and postcondition assertions to functions.</p>
</li>
	
	<li><p>Explain what test-driven development is, and use it when creating new functions.</p>
</li>
	
	<li><p>Explain why variables should be initialized using actual data values rather than arbitrary constants.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>Our previous lessons have introduced the basic tools of programming:
variables and lists,
file I/O,
loops,
conditionals,
and functions.
What they <em>haven’t</em> done is show us how to tell
whether a program is getting the right answer,
and how to tell if it’s <em>still</em> getting the right answer
as we make changes to it.</p>

<p>To achieve that,
we need to:</p>

<ul>
  <li>Write programs that check their own operation.</li>
  <li>Write and run tests for widely-used functions.</li>
  <li>Make sure we know what “correct” actually means.</li>
</ul>

<p>The good news is,
doing these things will speed up our programming,
not slow it down.
As in real carpentry — the kind done with lumber — the time saved
by measuring carefully before cutting a piece of wood
is much greater than the time that measuring takes.</p>

<h2 id="assertions">Assertions</h2>

<p>The first step toward getting the right answers from our programs
is to assume that mistakes <em>will</em> happen
and to guard against them.
This is called <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#defensive-programming">defensive programming</a>,
and the most common way to do it is to add
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#assertion">assertions</a> to our code
so that it checks itself as it runs.
An assertion is simply a statement that something must be true at a certain point in a program.
When Python sees one,
it evaluates the assertion’s condition.
If it’s true,
Python does nothing,
but if it’s false,
Python halts the program immediately
and prints the error message if one is provided.
For example,
this piece of code halts as soon as the loop encounters a value that isn’t positive:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">4.4</span><span class="p">]</span>
<span class="n">total</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s">'Data should only contain positive values'</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="n">num</span>
<span class="k">print</span><span class="p">(</span><span class="s">'total is:'</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-19-33d87ea29ae4&gt; in &lt;module&gt;()
      2 total = 0.0
      3 for num in numbers:
----&gt; 4     assert num &gt; 0.0, 'Data should only contain positive values'
      5     total += num
      6 print('total is:', total)

AssertionError: Data should only contain positive values
</code></pre></div></div>

<p>Programs like the Firefox browser are full of assertions:
10-20% of the code they contain
are there to check that the other 80–90% are working correctly.
Broadly speaking,
assertions fall into three categories:</p>

<ul>
  <li>
    <p>A <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#precondition">precondition</a>
is something that must be true at the start of a function in order for it to work correctly.</p>
  </li>
  <li>
    <p>A <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#postcondition">postcondition</a>
is something that the function guarantees is true when it finishes.</p>
  </li>
  <li>
    <p>An <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#invariant">invariant</a>
is something that is always true at a particular point inside a piece of code.</p>
  </li>
</ul>

<p>For example,
suppose we are representing rectangles using a <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#tuple">tuple</a>
of four coordinates <code class="language-plaintext highlighter-rouge">(x0, y0, x1, y1)</code>,
representing the lower left and upper right corners of the rectangle.
In order to do some calculations,
we need to normalize the rectangle so that the lower left corner is at the origin
and the longest side is 1.0 units long.
This function does that,
but checks that its input is correctly formatted and that its result makes sense:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">normalize_rectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">):</span>
    <span class="s">"""Normalizes a rectangle so that it is at the origin and 1.0 units long on its longest axis.
    Input should be of the format (x0, y0, x1, y1).
    (x0, y0) and (x1, y1) define the lower left and upper right corners
    of the rectangle, respectively."""</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'Rectangles must contain 4 coordinates'</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">rect</span>
    <span class="k">assert</span> <span class="n">x0</span> <span class="o">&lt;</span> <span class="n">x1</span><span class="p">,</span> <span class="s">'Invalid X coordinates'</span>
    <span class="k">assert</span> <span class="n">y0</span> <span class="o">&lt;</span> <span class="n">y1</span><span class="p">,</span> <span class="s">'Invalid Y coordinates'</span>

    <span class="n">dx</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span>
    <span class="k">if</span> <span class="n">dx</span> <span class="o">&gt;</span> <span class="n">dy</span><span class="p">:</span>
        <span class="n">scaled</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">/</span> <span class="n">dy</span>
        <span class="n">upper_x</span><span class="p">,</span> <span class="n">upper_y</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">scaled</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">scaled</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">/</span> <span class="n">dy</span>
        <span class="n">upper_x</span><span class="p">,</span> <span class="n">upper_y</span> <span class="o">=</span> <span class="n">scaled</span><span class="p">,</span> <span class="mf">1.0</span>

    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">upper_x</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">'Calculated upper X coordinate invalid'</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">upper_y</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">'Calculated upper Y coordinate invalid'</span>

    <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">upper_x</span><span class="p">,</span> <span class="n">upper_y</span><span class="p">)</span>
</code></pre></div></div>

<p>The preconditions on lines 6, 8, and 9 catch invalid inputs:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">normalize_rectangle</span><span class="p">(</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="p">))</span> <span class="c1"># missing the fourth coordinate
</span></code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-2-1b9cd8e18a1f&gt; in &lt;module&gt;
----&gt; 1 print(normalize_rectangle( (0.0, 1.0, 2.0) )) # missing the fourth coordinate

&lt;ipython-input-1-c94cf5b065b9&gt; in normalize_rectangle(rect)
      4     (x0, y0) and (x1, y1) define the lower left and upper right corners
      5     of the rectangle, respectively."""
----&gt; 6     assert len(rect) == 4, 'Rectangles must contain 4 coordinates'
      7     x0, y0, x1, y1 = rect
      8     assert x0 &lt; x1, 'Invalid X coordinates'

AssertionError: Rectangles must contain 4 coordinates
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">normalize_rectangle</span><span class="p">(</span> <span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span> <span class="p">))</span> <span class="c1"># X axis inverted
</span></code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-3-325036405532&gt; in &lt;module&gt;
----&gt; 1 print(normalize_rectangle( (4.0, 2.0, 1.0, 5.0) )) # X axis inverted

&lt;ipython-input-1-c94cf5b065b9&gt; in normalize_rectangle(rect)
      6     assert len(rect) == 4, 'Rectangles must contain 4 coordinates'
      7     x0, y0, x1, y1 = rect
----&gt; 8     assert x0 &lt; x1, 'Invalid X coordinates'
      9     assert y0 &lt; y1, 'Invalid Y coordinates'
     10

AssertionError: Invalid X coordinates
</code></pre></div></div>

<p>The post-conditions on lines 20 and 21 help us catch bugs by telling us when our
calculations might have been incorrect.
For example,
if we normalize a rectangle that is taller than it is wide everything seems OK:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">normalize_rectangle</span><span class="p">(</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span> <span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(0, 0, 0.2, 1.0)
</code></pre></div></div>

<p>but if we normalize one that’s wider than it is tall,
the assertion is triggered:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">normalize_rectangle</span><span class="p">(</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-5-8d4a48f1d068&gt; in &lt;module&gt;
----&gt; 1 print(normalize_rectangle( (0.0, 0.0, 5.0, 1.0) ))

&lt;ipython-input-1-c94cf5b065b9&gt; in normalize_rectangle(rect)
     19
     20     assert 0 &lt; upper_x &lt;= 1.0, 'Calculated upper X coordinate invalid'
---&gt; 21     assert 0 &lt; upper_y &lt;= 1.0, 'Calculated upper Y coordinate invalid'
     22
     23     return (0, 0, upper_x, upper_y)

AssertionError: Calculated upper Y coordinate invalid
</code></pre></div></div>

<p>Re-reading our function,
we realize that line 14 should divide <code class="language-plaintext highlighter-rouge">dy</code> by <code class="language-plaintext highlighter-rouge">dx</code> rather than <code class="language-plaintext highlighter-rouge">dx</code> by <code class="language-plaintext highlighter-rouge">dy</code>.
In a Jupyter notebook, you can display line numbers by typing <kbd>Ctrl</kbd>+<kbd>M</kbd>
followed by <kbd>L</kbd>.
If we had left out the assertion at the end of the function,
we would have created and returned something that had the right shape as a valid answer,
but wasn’t.
Detecting and debugging that would almost certainly have taken more time in the long run
than writing the assertion.</p>

<p>But assertions aren’t just about catching errors:
they also help people understand programs.
Each assertion gives the person reading the program
a chance to check (consciously or otherwise)
that their understanding matches what the code is doing.</p>

<p>Most good programmers follow two rules when adding assertions to their code.
The first is, <em>fail early, fail often</em>.
The greater the distance between when and where an error occurs and when it’s noticed,
the harder the error will be to debug,
so good code catches mistakes as early as possible.</p>

<p>The second rule is, <em>turn bugs into assertions or tests</em>.
Whenever you fix a bug, write an assertion that catches the mistake
should you make it again.
If you made a mistake in a piece of code,
the odds are good that you have made other mistakes nearby,
or will make the same mistake (or a related one)
the next time you change it.
Writing assertions to check that you haven’t <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#regression">regressed</a>
(i.e., haven’t re-introduced an old problem)
can save a lot of time in the long run,
and helps to warn people who are reading the code
(including your future self)
that this bit is tricky.</p>

<h2 id="test-driven-development">Test-Driven Development</h2>

<p>An assertion checks that something is true at a particular point in the program.
The next step is to check the overall behavior of a piece of code,
i.e.,
to make sure that it produces the right output when it’s given a particular input.
For example,
suppose we need to find where two or more time series overlap.
The range of each time series is represented as a pair of numbers,
which are the time the interval started and ended.
The output is the largest range that they all include:</p>

<p><img src="./aio_files/python-overlapping-ranges.svg" alt="Overlapping Ranges"></p>

<p>Most novice programmers would solve this problem like this:</p>

<ol>
  <li>Write a function <code class="language-plaintext highlighter-rouge">range_overlap</code>.</li>
  <li>Call it interactively on two or three different inputs.</li>
  <li>If it produces the wrong answer, fix the function and re-run that test.</li>
</ol>

<p>This clearly works — after all, thousands of scientists are doing it right now — but
there’s a better way:</p>

<ol>
  <li>Write a short function for each test.</li>
  <li>Write a <code class="language-plaintext highlighter-rouge">range_overlap</code> function that should pass those tests.</li>
  <li>If <code class="language-plaintext highlighter-rouge">range_overlap</code> produces any wrong answers, fix it and re-run the test functions.</li>
</ol>

<p>Writing the tests <em>before</em> writing the function they exercise
is called <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#test-driven-development">test-driven development</a> (TDD).
Its advocates believe it produces better code faster because:</p>

<ol>
  <li>If people write tests after writing the thing to be tested,
they are subject to confirmation bias,
i.e.,
they subconsciously write tests to show that their code is correct,
rather than to find errors.</li>
  <li>Writing tests helps programmers figure out what the function is actually supposed to do.</li>
</ol>

<p>Here are three test functions for <code class="language-plaintext highlighter-rouge">range_overlap</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-25-d8be150fbef6&gt; in &lt;module&gt;()
----&gt; 1 assert range_overlap([ (0.0, 1.0) ]) == (0.0, 1.0)
      2 assert range_overlap([ (2.0, 3.0), (2.0, 4.0) ]) == (2.0, 3.0)
      3 assert range_overlap([ (0.0, 1.0), (0.0, 2.0), (-1.0, 1.0) ]) == (0.0, 1.0)

AssertionError:
</code></pre></div></div>

<p>The error is actually reassuring:
we haven’t written <code class="language-plaintext highlighter-rouge">range_overlap</code> yet,
so if the tests passed,
it would be a sign that someone else had
and that we were accidentally using their function.</p>

<p>And as a bonus of writing these tests,
we’ve implicitly defined what our input and output look like:
we expect a list of pairs as input,
and produce a single pair as output.</p>

<p>Something important is missing, though.
We don’t have any tests for the case where the ranges don’t overlap at all:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="err">???</span>
</code></pre></div></div>

<p>What should <code class="language-plaintext highlighter-rouge">range_overlap</code> do in this case:
fail with an error message,
produce a special value like <code class="language-plaintext highlighter-rouge">(0.0, 0.0)</code> to signal that there’s no overlap,
or something else?
Any actual implementation of the function will do one of these things;
writing the tests first helps us figure out which is best
<em>before</em> we’re emotionally invested in whatever we happened to write
before we realized there was an issue.</p>

<p>And what about this case?</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="err">???</span>
</code></pre></div></div>

<p>Do two segments that touch at their endpoints overlap or not?
Mathematicians usually say “yes”,
but engineers usually say “no”.
The best answer is “whatever is most useful in the rest of our program”,
but again,
any actual implementation of <code class="language-plaintext highlighter-rouge">range_overlap</code> is going to do <em>something</em>,
and whatever it is ought to be consistent with what it does when there’s no overlap at all.</p>

<p>Since we’re planning to use the range this function returns
as the X axis in a time series chart,
we decide that:</p>

<ol>
  <li>every overlap has to have non-zero width, and</li>
  <li>we will return the special value <code class="language-plaintext highlighter-rouge">None</code> when there’s no overlap.</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">None</code> is built into Python,
and means “nothing here”.
(Other languages often call the equivalent value <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">nil</code>).
With that decision made,
we can finish writing our last two tests:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="bp">None</span>
<span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="bp">None</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-26-d877ef460ba2&gt; in &lt;module&gt;()
----&gt; 1 assert range_overlap([ (0.0, 1.0), (5.0, 6.0) ]) == None
      2 assert range_overlap([ (0.0, 1.0), (1.0, 2.0) ]) == None

AssertionError:
</code></pre></div></div>

<p>Again,
we get an error because we haven’t written our function,
but we’re now ready to do so:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">range_overlap</span><span class="p">(</span><span class="n">ranges</span><span class="p">):</span>
    <span class="s">"""Return common overlap among a set of [left, right] ranges."""</span>
    <span class="n">max_left</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">min_right</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
        <span class="n">max_left</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_left</span><span class="p">,</span> <span class="n">left</span><span class="p">)</span>
        <span class="n">min_right</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_right</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">max_left</span><span class="p">,</span> <span class="n">min_right</span><span class="p">)</span>
</code></pre></div></div>

<p>Take a moment to think about why we calculate the left endpoint of the overlap as
the maximum of the input left endpoints, and the overlap right endpoint as the minimum
of the input right endpoints.
We’d now like to re-run our tests,
but they’re scattered across three different cells.
To make running them easier,
let’s put them all in a function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_range_overlap</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="bp">None</span>
    <span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="bp">None</span>
    <span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">range_overlap</span><span class="p">([])</span> <span class="o">==</span> <span class="bp">None</span>
</code></pre></div></div>

<p>We can now test <code class="language-plaintext highlighter-rouge">range_overlap</code> with a single function call:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">test_range_overlap</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-29-cf9215c96457&gt; in &lt;module&gt;()
----&gt; 1 test_range_overlap()

&lt;ipython-input-28-5d4cd6fd41d9&gt; in test_range_overlap()
      1 def test_range_overlap():
----&gt; 2     assert range_overlap([ (0.0, 1.0), (5.0, 6.0) ]) == None
      3     assert range_overlap([ (0.0, 1.0), (1.0, 2.0) ]) == None
      4     assert range_overlap([ (0.0, 1.0) ]) == (0.0, 1.0)
      5     assert range_overlap([ (2.0, 3.0), (2.0, 4.0) ]) == (2.0, 3.0)

AssertionError:
</code></pre></div></div>

<p>The first test that was supposed to produce <code class="language-plaintext highlighter-rouge">None</code> fails,
so we know something is wrong with our function.
We <em>don’t</em> know whether the other tests passed or failed
because Python halted the program as soon as it spotted the first error.
Still,
some information is better than none,
and if we trace the behavior of the function with that input,
we realize that we’re initializing <code class="language-plaintext highlighter-rouge">max_left</code> and <code class="language-plaintext highlighter-rouge">min_right</code> to 0.0 and 1.0 respectively,
regardless of the input values.
This violates another important rule of programming:
<em>always initialize from data</em>.</p>

<blockquote class="challenge">
  <h2 id="pre--and-post-conditions">Pre- and Post-Conditions</h2>

  <p>Suppose you are writing a function called <code class="language-plaintext highlighter-rouge">average</code> that calculates
the average of the numbers in a list.
What pre-conditions and post-conditions would you write for it?
Compare your answer to your neighbor’s:
can you think of a function that will pass your tests but not his/hers or vice versa?</p>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="c1"># a possible pre-condition:
</span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'List length must be non-zero'</span>
<span class="c1"># a possible post-condition:
</span><span class="k">assert</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">input_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">average</span> <span class="o">&lt;=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">input_list</span><span class="p">),</span>
<span class="s">'Average should be between min and max of input values (inclusive)'</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="testing-assertions">Testing Assertions</h2>

  <p>Given a sequence of a number of cars, the function <code class="language-plaintext highlighter-rouge">get_total_cars</code> returns
the total number of cars.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get_total_cars</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10
</code></pre></div>  </div>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get_total_cars</span><span class="p">([</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">])</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ValueError: invalid literal for int() with base 10: 'a'
</code></pre></div>  </div>

  <p>Explain in words what the assertions in this function check,
and for each one,
give an example of input that will make that assertion fail.</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_total</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">int</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">total</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">total</span>
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <ul style="display: none;">
      <li>The first assertion checks that the input sequence <code class="language-plaintext highlighter-rouge">values</code> is not empty.
An empty sequence such as <code class="language-plaintext highlighter-rouge">[]</code> will make it fail.</li>
      <li>The second assertion checks that each value in the list can be turned into an integer.
Input such as <code class="language-plaintext highlighter-rouge">[1, 2,'c', 3]</code> will make it fail.</li>
      <li>The third assertion checks that the total of the list is greater than 0.
Input such as <code class="language-plaintext highlighter-rouge">[-10, 2, 3]</code> will make it fail.</li>
    </ul>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Program defensively, i.e., assume that errors are going to arise, and write code to detect them when they do.</p>
</li>
    
    <li><p>Put assertions in programs to check their state as they run, and to help readers understand how those programs are supposed to work.</p>
</li>
    
    <li><p>Use preconditions to check that the inputs to a function are safe to use.</p>
</li>
    
    <li><p>Use postconditions to check that the output from a function is safe to use.</p>
</li>
    
    <li><p>Write tests before writing code in order to help determine exactly what that code is supposed to do.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="debugging" class="maintitle">Debugging</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 20 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I debug my program?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Debug code containing an error systematically.</p>
</li>
	
	<li><p>Identify ways of making code less error-prone and more easily tested.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>Once testing has uncovered problems,
the next step is to fix them.
Many novices do this by making more-or-less random changes to their code
until it seems to produce the right answer,
but that’s very inefficient
(and the result is usually only correct for the one case they’re testing).
The more experienced a programmer is,
the more systematically they debug,
and most follow some variation on the rules explained below.</p>

<h2 id="know-what-its-supposed-to-do">Know What It’s Supposed to Do</h2>

<p>The first step in debugging something is to
<em>know what it’s supposed to do</em>.
“My program doesn’t work” isn’t good enough:
in order to diagnose and fix problems,
we need to be able to tell correct output from incorrect.
If we can write a test case for the failing case — i.e.,
if we can assert that with <em>these</em> inputs,
the function should produce <em>that</em> result —
then we’re ready to start debugging.
If we can’t,
then we need to figure out how we’re going to know when we’ve fixed things.</p>

<p>But writing test cases for scientific software is frequently harder than
writing test cases for commercial applications,
because if we knew what the output of the scientific code was supposed to be,
we wouldn’t be running the software:
we’d be writing up our results and moving on to the next program.
In practice,
scientists tend to do the following:</p>

<ol>
  <li>
    <p><em>Test with simplified data.</em>
Before doing statistics on a real data set,
we should try calculating statistics for a single record,
for two identical records,
for two records whose values are one step apart,
or for some other case where we can calculate the right answer by hand.</p>
  </li>
  <li>
    <p><em>Test a simplified case.</em>
If our program is supposed to simulate
magnetic eddies in rapidly-rotating blobs of supercooled helium,
our first test should be a blob of helium that isn’t rotating,
and isn’t being subjected to any external electromagnetic fields.
Similarly,
if we’re looking at the effects of climate change on speciation,
our first test should hold temperature, precipitation, and other factors constant.</p>
  </li>
  <li>
    <p><em>Compare to an oracle.</em>
A <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#test-oracle">test oracle</a> is something whose results are trusted,
such as experimental data, an older program, or a human expert.
We use test oracles to determine if our new program produces the correct results.
If we have a test oracle,
we should store its output for particular cases
so that we can compare it with our new results as often as we like
without re-running that program.</p>
  </li>
  <li>
    <p><em>Check conservation laws.</em>
Mass, energy, and other quantities are conserved in physical systems,
so they should be in programs as well.
Similarly,
if we are analyzing patient data,
the number of records should either stay the same or decrease
as we move from one analysis to the next
(since we might throw away outliers or records with missing values).
If “new” patients start appearing out of nowhere as we move through our pipeline,
it’s probably a sign that something is wrong.</p>
  </li>
  <li>
    <p><em>Visualize.</em>
Data analysts frequently use simple visualizations to check both
the science they’re doing
and the correctness of their code
(just as we did in the <a href="https://swcarpentry.github.io/python-novice-inflammation/01-numpy/">opening lesson</a> of this tutorial).
This should only be used for debugging as a last resort,
though,
since it’s very hard to compare two visualizations automatically.</p>
  </li>
</ol>

<h2 id="make-it-fail-every-time">Make It Fail Every Time</h2>

<p>We can only debug something when it fails,
so the second step is always to find a test case that
<em>makes it fail every time</em>.
The “every time” part is important because
few things are more frustrating than debugging an intermittent problem:
if we have to call a function a dozen times to get a single failure,
the odds are good that we’ll scroll past the failure when it actually occurs.</p>

<p>As part of this,
it’s always important to check that our code is “plugged in”,
i.e.,
that we’re actually exercising the problem that we think we are.
Every programmer has spent hours chasing a bug,
only to realize that they were actually calling their code on the wrong data set
or with the wrong configuration parameters,
or are using the wrong version of the software entirely.
Mistakes like these are particularly likely to happen when we’re tired,
frustrated,
and up against a deadline,
which is one of the reasons late-night (or overnight) coding sessions
are almost never worthwhile.</p>

<h2 id="make-it-fail-fast">Make It Fail Fast</h2>

<p>If it takes 20 minutes for the bug to surface,
we can only do three experiments an hour.
This means that we’ll get less data in more time and that
we’re more likely to be distracted by other things as we wait for our program to fail,
which means the time we <em>are</em> spending on the problem is less focused.
It’s therefore critical to <em>make it fail fast</em>.</p>

<p>As well as making the program fail fast in time,
we want to make it fail fast in space,
i.e.,
we want to localize the failure to the smallest possible region of code:</p>

<ol>
  <li>
    <p>The smaller the gap between cause and effect,
the easier the connection is to find.
Many programmers therefore use a divide and conquer strategy to find bugs,
i.e.,
if the output of a function is wrong,
they check whether things are OK in the middle,
then concentrate on either the first or second half,
and so on.</p>
  </li>
  <li>
    <p>N things can interact in N! different ways,
so every line of code that <em>isn’t</em> run as part of a test
means more than one thing we don’t need to worry about.</p>
  </li>
</ol>

<h2 id="change-one-thing-at-a-time-for-a-reason">Change One Thing at a Time, For a Reason</h2>

<p>Replacing random chunks of code is unlikely to do much good.
(After all,
if you got it wrong the first time,
you’ll probably get it wrong the second and third as well.)
Good programmers therefore
<em>change one thing at a time, for a reason</em>.
They are either trying to gather more information
(“is the bug still there if we change the order of the loops?”)
or test a fix
(“can we make the bug go away by sorting our data before processing it?”).</p>

<p>Every time we make a change,
however small,
we should re-run our tests immediately,
because the more things we change at once,
the harder it is to know what’s responsible for what
(those N! interactions again).
And we should re-run <em>all</em> of our tests:
more than half of fixes made to code introduce (or re-introduce) bugs,
so re-running all of our tests tells us whether we have regressed.</p>

<h2 id="keep-track-of-what-youve-done">Keep Track of What You’ve Done</h2>

<p>Good scientists keep track of what they’ve done
so that they can reproduce their work,
and so that they don’t waste time repeating the same experiments
or running ones whose results won’t be interesting.
Similarly,
debugging works best when we
<em>keep track of what we’ve done</em>
and how well it worked.
If we find ourselves asking,
“Did left followed by right with an odd number of lines cause the crash?
Or was it right followed by left?
Or was I using an even number of lines?”
then it’s time to step away from the computer,
take a deep breath,
and start working more systematically.</p>

<p>Records are particularly useful when the time comes to ask for help.
People are more likely to listen to us
when we can explain clearly what we did,
and we’re better able to give them the information they need to be useful.</p>

<blockquote class="callout">
  <h2 id="version-control-revisited">Version Control Revisited</h2>

  <p>Version control is often used to reset software to a known state during debugging,
and to explore recent changes to code that might be responsible for bugs.
In particular,
most version control systems (e.g. git, Mercurial) have:</p>
  <ol>
    <li>a <code class="language-plaintext highlighter-rouge">blame</code> command that shows who last changed each line of a file;</li>
    <li>a <code class="language-plaintext highlighter-rouge">bisect</code> command that helps with finding the commit that introduced an
issue.</li>
  </ol>
</blockquote>

<h2 id="be-humble">Be Humble</h2>

<p>And speaking of help:
if we can’t find a bug in 10 minutes,
we should <em>be humble</em> and ask for help.
Explaining the problem to someone else is often useful,
since hearing what we’re thinking helps us spot inconsistencies and hidden assumptions.
If you don’t have someone nearby to share your problem description with, get a
<a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging">rubber duck</a>!</p>

<p>Asking for help also helps alleviate confirmation bias.
If we have just spent an hour writing a complicated program,
we want it to work,
so we’re likely to keep telling ourselves why it should,
rather than searching for the reason it doesn’t.
People who aren’t emotionally invested in the code can be more objective,
which is why they’re often able to spot the simple mistakes we have overlooked.</p>

<p>Part of being humble is learning from our mistakes.
Programmers tend to get the same things wrong over and over:
either they don’t understand the language and libraries they’re working with,
or their model of how things work is wrong.
In either case,
taking note of why the error occurred
and checking for it next time
quickly turns into not making the mistake at all.</p>

<p>And that is what makes us most productive in the long run.
As the saying goes,
<em>A week of hard work can sometimes save you an hour of thought</em>.
If we train ourselves to avoid making some kinds of mistakes,
to break our code into modular, testable chunks,
and to turn every assumption (or mistake) into an assertion,
it will actually take us <em>less</em> time to produce working programs,
not more.</p>

<blockquote class="challenge">
  <h2 id="debug-with-a-neighbor">Debug With a Neighbor</h2>

  <p>Take a function that you have written today, and introduce a tricky bug.
Your function should still run, but will give the wrong output.
Switch seats with your neighbor and attempt to debug
the bug that they introduced into their function.
Which of the principles discussed above did you find helpful?</p>
</blockquote>

<blockquote class="challenge">
  <h2 id="not-supposed-to-be-the-same">Not Supposed to be the Same</h2>

  <p>You are assisting a researcher with Python code that computes the
Body Mass Index (BMI) of patients.  The researcher is concerned because
all patients seemingly have unusual and identical BMIs, despite having different
physiques.  BMI is calculated as <strong>weight in kilograms</strong>
divided by the square of <strong>height in metres</strong>.</p>

  <p>Use the debugging principles in this exercise and locate problems
with the code. What suggestions would you give the researcher for
ensuring any later changes they make work correctly?</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">patients</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">70</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">],</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">],</span> <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">]]</span>

<span class="k">def</span> <span class="nf">calculate_bmi</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">(</span><span class="n">height</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">patient</span> <span class="ow">in</span> <span class="n">patients</span><span class="p">:</span>
    <span class="n">weight</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">patients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">bmi</span> <span class="o">=</span> <span class="n">calculate_bmi</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Patient's BMI is: %f"</span> <span class="o">%</span> <span class="n">bmi</span><span class="p">)</span>
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Patient's BMI is: 0.000367
Patient's BMI is: 0.000367
Patient's BMI is: 0.000367
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <ul style="display: none;">
      <li>
        <p>The loop is not being utilised correctly. <code class="language-plaintext highlighter-rouge">height</code> and <code class="language-plaintext highlighter-rouge">weight</code> are always
set as the first patient’s data during each iteration of the loop.</p>
      </li>
      <li>
        <p>The height/weight variables are reversed in the function call to
<code class="language-plaintext highlighter-rouge">calculate_bmi(...)</code>, the correct BMIs are 21.604938, 22.160665 and 51.903114.</p>
      </li>
    </ul>
  </blockquote>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Know what code is supposed to do <em>before</em> trying to debug it.</p>
</li>
    
    <li><p>Make it fail every time.</p>
</li>
    
    <li><p>Make it fail fast.</p>
</li>
    
    <li><p>Change one thing at a time, and for a reason.</p>
</li>
    
    <li><p>Keep track of what you’ve done.</p>
</li>
    
    <li><p>Be humble.</p>
</li>
    
  </ul>
</blockquote>

<hr>

<h1 id="command-line-programs" class="maintitle">Command-Line Programs</h1>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I write Python programs that will work like Unix command-line tools?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Use the values of command-line arguments in a program.</p>
</li>
	
	<li><p>Handle flags and files separately in a command-line program.</p>
</li>
	
	<li><p>Read data from standard input in a program so that it can be used in a pipeline.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>The Jupyter Notebook and other interactive tools are great for prototyping code and exploring data,
but sooner or later we will want to use our program in a pipeline
or run it in a shell script to process thousands of data files.
In order to do that,
we need to make our programs work like other Unix command-line tools.
For example,
we may want a program that reads a dataset
and prints the average inflammation per patient.</p>

<blockquote class="callout">
  <h2 id="switching-to-shell-commands">Switching to Shell Commands</h2>

  <p>In this lesson we are switching from typing commands in a Python interpreter to typing
commands in a shell terminal window (such as bash). When you see a <code class="language-plaintext highlighter-rouge">$</code> in front of a
command that tells you to run that command in the shell rather than the Python interpreter.</p>
</blockquote>

<p>This program does exactly what we want - it prints the average inflammation per patient
for a given file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_04.py <span class="nt">--mean</span> inflammation-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5.45
5.425
6.1
...
6.4
7.05
5.9
</code></pre></div></div>

<p>We might also want to look at the minimum of the first four lines</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">head</span> <span class="nt">-4</span> inflammation-01.csv | python ../code/readings_06.py <span class="nt">--min</span>
</code></pre></div></div>

<p>or the maximum inflammations in several files one after another:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_04.py <span class="nt">--max</span> inflammation-<span class="k">*</span>.csv
</code></pre></div></div>

<p>Our scripts should do the following:</p>

<ol>
  <li>If no filename is given on the command line, read data from
<a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#standard-input">standard input</a>.</li>
  <li>If one or more filenames are given, read data from them and report statistics for each file
separately.</li>
  <li>Use the <code class="language-plaintext highlighter-rouge">--min</code>, <code class="language-plaintext highlighter-rouge">--mean</code>, or <code class="language-plaintext highlighter-rouge">--max</code> flag to determine what statistic to print.</li>
</ol>

<p>To make this work,
we need to know how to handle command-line arguments in a program,
and understand how to handle standard input.
We’ll tackle these questions in turn below.</p>

<h2 id="command-line-arguments">Command-Line Arguments</h2>

<p>Using the text editor of your choice,
save the following in a text file called <code class="language-plaintext highlighter-rouge">sys_version.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span><span class="p">(</span><span class="s">'version is'</span><span class="p">,</span> <span class="n">sys</span><span class="p">.</span><span class="n">version</span><span class="p">)</span>
</code></pre></div></div>

<p>The first line imports a library called <code class="language-plaintext highlighter-rouge">sys</code>,
which is short for “system”.
It defines values such as <code class="language-plaintext highlighter-rouge">sys.version</code>,
which describes which version of Python we are running.
We can run this script from the command line like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python sys_version.py
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version is 3.4.3+ (default, Jul 28 2015, 13:17:50)
[GCC 4.9.3]
</code></pre></div></div>

<p>Create another file called <code class="language-plaintext highlighter-rouge">argv_list.py</code> and save the following text to it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span><span class="p">(</span><span class="s">'sys.argv is'</span><span class="p">,</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
</code></pre></div></div>

<p>The strange name <code class="language-plaintext highlighter-rouge">argv</code> stands for “argument values”.
Whenever Python runs a program,
it takes all of the values given on the command line
and puts them in the list <code class="language-plaintext highlighter-rouge">sys.argv</code>
so that the program can determine what they were.
If we run this program with no arguments:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python argv_list.py
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sys.argv is ['argv_list.py']
</code></pre></div></div>

<p>the only thing in the list is the full path to our script,
which is always <code class="language-plaintext highlighter-rouge">sys.argv[0]</code>.
If we run it with a few arguments, however:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python argv_list.py first second third
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sys.argv is ['argv_list.py', 'first', 'second', 'third']
</code></pre></div></div>

<p>then Python adds each of those arguments to that magic list.</p>

<p>With this in hand, let’s build a version of <code class="language-plaintext highlighter-rouge">readings.py</code> that always prints
the per-patient mean of a single data file.
The first step is to write a function that outlines our implementation,
and a placeholder for the function that does the actual work.
By convention this function is usually called <code class="language-plaintext highlighter-rouge">main</code>,
though we can call it whatever we want:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/readings_01.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row_mean</span> <span class="ow">in</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">row_mean</span><span class="p">)</span>
</code></pre></div></div>

<p>This function gets the name of the script from <code class="language-plaintext highlighter-rouge">sys.argv[0]</code>,
because that’s where it’s always put,
and the name of the file to process from <code class="language-plaintext highlighter-rouge">sys.argv[1]</code>.
Here’s a simple test:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_01.py inflammation-01.csv
</code></pre></div></div>

<p>There is no output because we have defined a function,
but haven’t actually called it.
Let’s add a call to <code class="language-plaintext highlighter-rouge">main</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/readings_02.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row_mean</span> <span class="ow">in</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">row_mean</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
   <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>and run that:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_02.py inflammation-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5.45
5.425
6.1
5.9
5.55
6.225
5.975
6.65
6.625
6.525
6.775
5.8
6.225
5.75
5.225
6.3
6.55
5.7
5.85
6.55
5.775
5.825
6.175
6.1
5.8
6.425
6.05
6.025
6.175
6.55
6.175
6.35
6.725
6.125
7.075
5.725
5.925
6.15
6.075
5.75
5.975
5.725
6.3
5.9
6.75
5.925
7.225
6.15
5.95
6.275
5.7
6.1
6.825
5.975
6.725
5.7
6.25
6.4
7.05
5.9
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="running-versus-importing">Running Versus Importing</h2>

  <p>Running a Python script in bash is very similar to
importing that file in Python.
The biggest difference is that we don’t expect anything
to happen when we import a file,
whereas when running a script, we expect to see some
output printed to the console.</p>

  <p>In order for a Python script to work as expected
when imported or when run as a script,
we typically put the part of the script
that produces output in the following if statement:</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>  <span class="c1"># Or whatever function produces output
</span></code></pre></div>  </div>

  <p>When you import a Python file, <code class="language-plaintext highlighter-rouge">__name__</code> is the name
of that file (e.g., when importing <code class="language-plaintext highlighter-rouge">readings.py</code>,
<code class="language-plaintext highlighter-rouge">__name__</code> is <code class="language-plaintext highlighter-rouge">'readings'</code>). However, when running a
script in bash, <code class="language-plaintext highlighter-rouge">__name__</code> is always set to <code class="language-plaintext highlighter-rouge">'__main__'</code>
in that script so that you can determine if the file
is being imported or run as a script.</p>
</blockquote>

<blockquote class="callout">
  <h2 id="the-right-way-to-do-it">The Right Way to Do It</h2>

  <p>If our programs can take complex parameters or multiple filenames,
we shouldn’t handle <code class="language-plaintext highlighter-rouge">sys.argv</code> directly.
Instead,
we should use Python’s <code class="language-plaintext highlighter-rouge">argparse</code> library,
which handles common cases in a systematic way,
and also makes it easy for us to provide sensible error messages for our users.
We will not cover this module in this lesson
but you can go to Tshepang Lekhonkhobe’s
<a href="http://docs.python.org/3/howto/argparse.html">Argparse tutorial</a>
that is part of Python’s Official Documentation.</p>
</blockquote>

<h2 id="handling-multiple-files">Handling Multiple Files</h2>

<p>The next step is to teach our program how to handle multiple files.
Since 60 lines of output per file is a lot to page through,
we’ll start by using three smaller files,
each of which has three days of data for two patients:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls </span>small-<span class="k">*</span>.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>small-01.csv small-02.csv small-03.csv
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>small-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0,0,1
0,1,2
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_02.py small-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0.333333333333
1.0
</code></pre></div></div>

<p>Using small data files as input also allows us to check our results more easily:
here,
for example,
we can see that our program is calculating the mean correctly for each line,
whereas we were really taking it on faith before.
This is yet another rule of programming:
<em>test the simple things first</em>.</p>

<p>We want our program to process each file separately,
so we need a loop that executes once for each filename.
If we specify the files on the command line,
the filenames will be in <code class="language-plaintext highlighter-rouge">sys.argv</code>,
but we need to be careful:
<code class="language-plaintext highlighter-rouge">sys.argv[0]</code> will always be the name of our script,
rather than the name of a file.
We also need to handle an unknown number of filenames,
since our program could be run for any number of files.</p>

<p>The solution to both problems is to loop over the contents of <code class="language-plaintext highlighter-rouge">sys.argv[1:]</code>.
The ‘1’ tells Python to start the slice at location 1,
so the program’s name isn’t included;
since we’ve left off the upper bound,
the slice runs to the end of the list,
and includes all the filenames.
Here’s our changed program
<code class="language-plaintext highlighter-rouge">readings_03.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/readings_03.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row_mean</span> <span class="ow">in</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="n">row_mean</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
   <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>and here it is in action:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_03.py small-01.csv small-02.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0.333333333333
1.0
13.6666666667
11.0
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="the-right-way-to-do-it-1">The Right Way to Do It</h2>

  <p>At this point,
we have created three versions of our script called <code class="language-plaintext highlighter-rouge">readings_01.py</code>,
<code class="language-plaintext highlighter-rouge">readings_02.py</code>, and <code class="language-plaintext highlighter-rouge">readings_03.py</code>.
We wouldn’t do this in real life:
instead,
we would have one file called <code class="language-plaintext highlighter-rouge">readings.py</code> that we committed to version control
every time we got an enhancement working.
For teaching,
though,
we need all the successive versions side by side.</p>
</blockquote>

<h2 id="handling-command-line-flags">Handling Command-Line Flags</h2>

<p>The next step is to teach our program to pay attention to the <code class="language-plaintext highlighter-rouge">--min</code>, <code class="language-plaintext highlighter-rouge">--mean</code>, and <code class="language-plaintext highlighter-rouge">--max</code> flags.
These always appear before the names of the files,
so we could do this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/readings_04.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>

    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--min'</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--mean'</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--max'</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
   <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>This works:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_04.py <span class="nt">--max</span> small-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.0
2.0
</code></pre></div></div>

<p>but there are several things wrong with it:</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">main</code> is too large to read comfortably.</p>
  </li>
  <li>
    <p>If we do not specify at least two additional arguments on the
command-line, one for the <strong>flag</strong> and one for the <strong>filename</strong>, but only
one, the program will not throw an exception but will run. It assumes that the file
list is empty, as <code class="language-plaintext highlighter-rouge">sys.argv[1]</code> will be considered the <code class="language-plaintext highlighter-rouge">action</code>, even if it
is a filename. <a href="https://swcarpentry.github.io/python-novice-inflammation/reference/#silence-failure">Silent failures</a>  like this
are always hard to debug.</p>
  </li>
  <li>
    <p>The program should check if the submitted <code class="language-plaintext highlighter-rouge">action</code> is one of the three recognized flags.</p>
  </li>
</ol>

<p>This version pulls the processing of each file out of the loop into a function of its own.
It also checks that <code class="language-plaintext highlighter-rouge">action</code> is one of the allowed flags
before doing any processing,
so that the program fails fast:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/readings_05.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">assert</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'--min'</span><span class="p">,</span> <span class="s">'--mean'</span><span class="p">,</span> <span class="s">'--max'</span><span class="p">],</span> \
           <span class="s">'Action is not one of --min, --mean, or --max: '</span> <span class="o">+</span> <span class="n">action</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--min'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--mean'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--max'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
   <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>This is four lines longer than its predecessor,
but broken into more digestible chunks of 8 and 12 lines.</p>

<h2 id="handling-standard-input">Handling Standard Input</h2>

<p>The next thing our program has to do is read data from standard input if no filenames are given
so that we can put it in a pipeline,
redirect input to it,
and so on.
Let’s experiment in another script called <code class="language-plaintext highlighter-rouge">count_stdin.py</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/count_stdin.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">:</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">print</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="s">'lines in standard input'</span><span class="p">)</span>
</code></pre></div></div>

<p>This little program reads lines from a special “file” called <code class="language-plaintext highlighter-rouge">sys.stdin</code>,
which is automatically connected to the program’s standard input.
We don’t have to open it — Python and the operating system
take care of that when the program starts up —
but we can do almost anything with it that we could do to a regular file.
Let’s try running it as if it were a regular command-line program:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/count_stdin.py &lt; small-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2 lines in standard input
</code></pre></div></div>

<p>A common mistake is to try to run something that reads from standard input like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/count_stdin.py small-01.csv
</code></pre></div></div>

<p>i.e., to forget the <code class="language-plaintext highlighter-rouge">&lt;</code> character that redirects the file to standard input.
In this case,
there’s nothing in standard input,
so the program waits at the start of the loop for someone to type something on the keyboard.
Since there’s no way for us to do this,
our program is stuck,
and we have to halt it using the <code class="language-plaintext highlighter-rouge">Interrupt</code> option from the <code class="language-plaintext highlighter-rouge">Kernel</code> menu in the Notebook.</p>

<p>We now need to rewrite the program so that it loads data from <code class="language-plaintext highlighter-rouge">sys.stdin</code>
if no filenames are provided.
Luckily,
<code class="language-plaintext highlighter-rouge">numpy.loadtxt</code> can handle either a filename or an open file as its first parameter,
so we don’t actually need to change <code class="language-plaintext highlighter-rouge">process</code>.
Only <code class="language-plaintext highlighter-rouge">main</code> changes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ../code/readings_06.py
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">assert</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'--min'</span><span class="p">,</span> <span class="s">'--mean'</span><span class="p">,</span> <span class="s">'--max'</span><span class="p">],</span> \
           <span class="s">'Action is not one of --min, --mean, or --max: '</span> <span class="o">+</span> <span class="n">action</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--min'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--mean'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--max'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
   <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>Let’s try it out:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python ../code/readings_06.py <span class="nt">--mean</span> &lt; small-01.csv
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0.333333333333
1.0
</code></pre></div></div>

<p>That’s better.
In fact,
that’s done:
the program now does everything we set out to do.</p>

<blockquote class="challenge">
  <h2 id="arithmetic-on-the-command-line">Arithmetic on the Command Line</h2>

  <p>Write a command-line program that does addition and subtraction:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python arith.py add 1 2
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3
</code></pre></div>  </div>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python arith.py subtract 3 4
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-1
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'Need exactly 3 arguments'</span>

    <span class="n">operator</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">operator</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'add'</span><span class="p">,</span> <span class="s">'subtract'</span><span class="p">,</span> <span class="s">'multiply'</span><span class="p">,</span> <span class="s">'divide'</span><span class="p">],</span> \
        <span class="s">'Operator is not one of add, subtract, multiply, or divide: bailing out'</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">operand1</span><span class="p">,</span> <span class="n">operand2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'cannot convert input to a number: bailing out'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">do_arithmetic</span><span class="p">(</span><span class="n">operand1</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">operand2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">do_arithmetic</span><span class="p">(</span><span class="n">operand1</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">operand2</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s">'add'</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">operand1</span> <span class="o">+</span> <span class="n">operand2</span>
    <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s">'subtract'</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">operand1</span> <span class="o">-</span> <span class="n">operand2</span>
    <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s">'multiply'</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">operand1</span> <span class="o">*</span> <span class="n">operand2</span>
    <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s">'divide'</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">operand1</span> <span class="o">/</span> <span class="n">operand2</span>
    <span class="k">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="finding-particular-files">Finding Particular Files</h2>

  <p>Using the <code class="language-plaintext highlighter-rouge">glob</code> module introduced <a href="https://swcarpentry.github.io/python-novice-inflammation/04-files/">earlier</a>,
write a simple version of <code class="language-plaintext highlighter-rouge">ls</code> that shows files in the current directory
with a particular suffix.
A call to this script should look like this:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python my_ls.py py
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>left.py
right.py
zero.py
</code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-1">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">glob</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="s">"""prints names of all files with sys.argv as suffix"""</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'Argument list cannot be empty'</span>
    <span class="n">suffix</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># NB: behaviour is not as you'd expect if sys.argv[1] is *
</span>    <span class="n">glob_input</span> <span class="o">=</span> <span class="s">'*.'</span> <span class="o">+</span> <span class="n">suffix</span> <span class="c1"># construct the input
</span>    <span class="n">glob_output</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="n">glob_input</span><span class="p">))</span> <span class="c1"># call the glob function
</span>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">glob_output</span><span class="p">:</span> <span class="c1"># print the output
</span>        <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">return</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="changing-flags">Changing Flags</h2>

  <p>Rewrite <code class="language-plaintext highlighter-rouge">readings.py</code> so that it uses <code class="language-plaintext highlighter-rouge">-n</code>, <code class="language-plaintext highlighter-rouge">-m</code>, and <code class="language-plaintext highlighter-rouge">-x</code>
instead of <code class="language-plaintext highlighter-rouge">--min</code>, <code class="language-plaintext highlighter-rouge">--mean</code>, and <code class="language-plaintext highlighter-rouge">--max</code> respectively.
Is the code easier to read?
Is the program easier to understand?</p>

  <blockquote class="solution">
    <h2 id="solution-2">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="c1"># this is code/readings_07.py
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">assert</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'-n'</span><span class="p">,</span> <span class="s">'-m'</span><span class="p">,</span> <span class="s">'-x'</span><span class="p">],</span> \
           <span class="s">'Action is not one of -n, -m, or -x: '</span> <span class="o">+</span> <span class="n">action</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'-n'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'-m'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'-x'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="adding-a-help-message">Adding a Help Message</h2>

  <p>Separately,
modify <code class="language-plaintext highlighter-rouge">readings.py</code> so that if no parameters are given
(i.e., no action is specified and no filenames are given),
it prints a message explaining how it should be used.</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="c1"># this is code/readings_08.py
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># no arguments, so print help message
</span>        <span class="k">print</span><span class="p">(</span><span class="s">"""Usage: python readings_08.py action filenames
              action must be one of --min --mean --max
              if filenames is blank, input is taken from stdin;
              otherwise, each filename in the list of arguments is processed in turn"""</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">action</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">assert</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'--min'</span><span class="p">,</span> <span class="s">'--mean'</span><span class="p">,</span> <span class="s">'--max'</span><span class="p">],</span> \
           <span class="s">'Action is not one of --min, --mean, or --max: '</span> <span class="o">+</span> <span class="n">action</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--min'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--mean'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--max'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="adding-a-default-action">Adding a Default Action</h2>

  <p>Separately,
modify <code class="language-plaintext highlighter-rouge">readings.py</code> so that if no action is given
it displays the means of the data.</p>

  <blockquote class="solution">
    <h2 id="solution-4">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="c1"># this is code/readings_09.py
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">action</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'--min'</span><span class="p">,</span> <span class="s">'--mean'</span><span class="p">,</span> <span class="s">'--max'</span><span class="p">]:</span> <span class="c1"># if no action given
</span>        <span class="n">action</span> <span class="o">=</span> <span class="s">'--mean'</span>    <span class="c1"># set a default action, that being mean
</span>        <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># start the filenames one place earlier in the argv list
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--min'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--mean'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">'--max'</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="a-file-checker">A File-Checker</h2>

  <p>Write a program called <code class="language-plaintext highlighter-rouge">check.py</code> that takes the names of one or more
inflammation data files as arguments
and checks that all the files have the same number of rows and columns.
What is the best way to test your program?</p>

  <blockquote class="solution">
    <h2 id="solution-5">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">&lt;=</span><span class="mi">1</span><span class="p">:</span> <span class="c1">#nothing to check
</span>        <span class="k">print</span><span class="p">(</span><span class="s">'Only 1 file specified on input'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nrow0</span><span class="p">,</span> <span class="n">ncol0</span> <span class="o">=</span> <span class="n">row_col_count</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'First file %s: %d rows and %d columns'</span> <span class="o">%</span> <span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nrow0</span><span class="p">,</span> <span class="n">ncol0</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="n">row_col_count</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nrow</span> <span class="o">!=</span> <span class="n">nrow0</span> <span class="ow">or</span> <span class="n">ncol</span> <span class="o">!=</span> <span class="n">ncol0</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">'File %s does not check: %d rows and %d columns'</span> <span class="o">%</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">'File %s checks'</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span>

<span class="k">def</span> <span class="nf">row_col_count</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="n">numpy</span><span class="p">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">).</span><span class="n">shape</span>
    <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
        <span class="c1"># 'ValueError' error is raised when numpy encounters lines that
</span>        <span class="c1"># have different number of data elements in them than the rest of the lines,
</span>        <span class="c1"># or when lines have non-numeric elements
</span>        <span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="counting-lines">Counting Lines</h2>

  <p>Write a program called <code class="language-plaintext highlighter-rouge">line_count.py</code> that works like the Unix <code class="language-plaintext highlighter-rouge">wc</code> command:</p>

  <ul>
    <li>If no filenames are given, it reports the number of lines in standard input.</li>
    <li>If one or more filenames are given, it reports the number of lines in each,
followed by the total number of lines.</li>
  </ul>

  <blockquote class="solution">
    <h2 id="solution-6">Solution<span class="fold-unfold glyphicon glyphicon-collapse-down"></span></h2>
    <div class="language-python highlighter-rouge" style="display: none;"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="s">"""print each input filename and the number of lines in it,
       and print the sum of the number of lines"""</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">sum_nlines</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#initialize counting variable
</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># no filenames, just stdin
</span>        <span class="n">sum_nlines</span> <span class="o">=</span> <span class="n">count_file_like</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'stdin: %d'</span> <span class="o">%</span> <span class="n">sum_nlines</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">nlines</span> <span class="o">=</span> <span class="n">count_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'%s %d'</span> <span class="o">%</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">nlines</span><span class="p">))</span>
            <span class="n">sum_nlines</span> <span class="o">+=</span> <span class="n">nlines</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'total: %d'</span> <span class="o">%</span> <span class="n">sum_nlines</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">count_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="s">"""count the number of lines in a file"""</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span>
    <span class="n">nlines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">())</span>
    <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span><span class="p">(</span><span class="n">nlines</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">count_file_like</span><span class="p">(</span><span class="n">file_like</span><span class="p">):</span>
    <span class="s">"""count the number of lines in a file-like object (eg stdin)"""</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_like</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">n</span>

<span class="n">main</span><span class="p">()</span>

</code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="generate-an-error-message">Generate an Error Message</h2>

  <p>Write a program called <code class="language-plaintext highlighter-rouge">check_arguments.py</code> that prints usage
then exits the program if no arguments are provided.
(Hint: You can use <code class="language-plaintext highlighter-rouge">sys.exit()</code> to exit the program.)</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python check_arguments.py
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: python check_argument.py filename.txt
</code></pre></div>  </div>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python check_arguments.py filename.txt
</code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Thanks for specifying arguments!
</code></pre></div>  </div>
</blockquote>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>The <code class="language-plaintext highlighter-rouge">sys</code> library connects a Python program to the system it is running on.</p>
</li>
    
    <li><p>The list <code class="language-plaintext highlighter-rouge">sys.argv</code> contains the command-line arguments that a program was run with.</p>
</li>
    
    <li><p>Avoid silent failures.</p>
</li>
    
    <li><p>The pseudo-file <code class="language-plaintext highlighter-rouge">sys.stdin</code> connects to a program’s standard input.</p>
</li>
    
  </ul>
</blockquote>

<hr>


</article>

      
      






<footer>
  <div class="row">
  </div>
</footer>

      
    </div>
    
<script async="" src="../js/analytics.js.download"></script><script src="../js/jquery.min.js.download"></script>
<script src="../js/bootstrap.min.js.download"></script>
<script src="../js/lesson.js.download"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  

</body></html>